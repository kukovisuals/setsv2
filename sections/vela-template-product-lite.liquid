<style>

.isBundleBras .nrml-price23,
.isMblBundleBras .nrml-price23 {
  color: var(--red-color-discounts);
  margin-left: 9px;
  font-size: 16px;
}
.isBundleBras .isBundleBraExtra23,
.proButton.mb20 .addToCartPdpWrapper.onetime-active button#AddBoxToCart,
.proButton.mb20 .addToCartPdpWrapper.subscribe-active button#AddToCart {
  display: none;
}
.isBundleBras .isBundleBraExtra23,
.isMblBundleBras .isBundleBraExtra23 {
  font-size: 16px;
  color: var(--light-gray-color);
  text-decoration: line-through;
}
a.klaviyo-bis-trigger.e_enabled {
    display: block !important;
}
/**/
.bis_modal {
    max-height: 330px;
    height: auto;
    background: transparent;
    max-width: 350px;
    top: 0%;
}
.bis_modal h4 {
    font-size: 1.6rem;
    margin: 0;
}
.bis_modal p {
    font-size: 1.2rem;
    margin: 0 auto 2rem;
}
.bis_modal .e_bis_form {
    margin: 2rem auto 0;
}
.e_bis_form .form_row {
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    text-align: left;
    padding-bottom: 1.2rem;
}
.form_row .input_label {
    font-size: 1.2rem;
    line-height: normal;
    display: inline-block;
    max-width: 100%;
    margin-bottom: 5px;
}
.e_bis_form .e_email_input, 
.e_bis_form .e_phone_input{
    border-radius: 4px;
    padding: 0.5rem 1rem;
    font-size: 1.6rem;
    color: #04081c;
    border: 1px solid #bfc1cb;
    width: 100%;
    display: block;
}
.e_bis_form .form_row.checkbox_row {
    flex-direction: row;
    align-items: normal;
    margin-top: 1.4rem;
}
.e_bis_form input.e_checkbox_input {
    width: 25px;
    height: 25px;
    display: inline-block;
    margin: 0.4rem 1rem 0 0;
    vertical-align: middle;
    min-width: 25px;
}
.e_bis_form .form_row.checkbox_row label {
    line-height: 1.8rem;
}
.e_bis_form button {
    border-radius: 4px;
    margin-top: 1rem;
    border: none;
    font-size: 1.6rem;
    padding: 0.6rem 1.2rem;
    background: #04081c;
    color: #fff;
    width: 100%;
    max-width: 330px;
}
/**/
.adjBraTemp form .proVariants:after {
    content: "";
    background: url("https://cdn.shopify.com/s/files/1/0313/4062/5964/files/PDP_-_size-scale_-_small_-_lite.svg");
    height: 50px;
    display: block;
    width: 100%;
    background-position: center top;
    background-repeat: no-repeat;
    position: relative;
    top: -10px;
    font-family: 'Open Sans';
}
/*------- sub -----------*/
.didntsize{
  font-size: 20px;
}
.js-swatch .swatch-element.soldout{
  pointer-events: none;
}
.rebuy-bundle__image,
.rebuy-bundle__image img{
  max-width: 100px;
  display: inline-block;
}
.rebuy-bundle__image img {
  visibility: initial;
}
.rebuy-bundle__images {
  display: flex;
  justify-content: space-between;
}
.rebuy-bundle .rebuy-select {
    min-width: 100px;
}
  

.addToCartPdpWrapper ul {
    padding: 0;
    list-style: none;
    margin: 0;
}
.addToCartToggleButton.sub .bulletedListingWrapper {
    position: relative;
    right: 21px;
    flex:6;
}
span.addToCartToggleBenefit {
    display: flex;
    align-items: center;
}
.addToCartPdpWrapper .addToCartToggleButton {
    display: flex;
    flex-direction: column;
    width: 100%;
    border: 1px solid #dfe0e5;
    border-radius: 4px;
    padding: 1rem 1.4rem;
    background: #efeff2;
    font-size: 1.4rem;
    color: #7f8397;
    cursor: pointer;
}
.addToCartToggleButton header .addToCartToggleTitle {
    flex: 3;
    text-align: left;
    padding-left: 1rem;
}
.addToCartPdpWrapper .addToCartToggleButton:first-child {
    margin-bottom: 1.6rem;
}
.addToCartPdpWrapper .addToCartToggleButton.active {
    color: #00082f;
    border: 1px solid #00082f;
    background: #fff;
}
.addToCartToggleButton header {
    display: flex;
    flex-direction: row;
    width: 100%;
    justify-content: space-between;
    font-weight: 500;
    pointer-events: none;
}
.addToCartToggleButton footer {
    font-size: 1.2rem;
    display: flex;
    flex-direction: row;
    width: 100%;
    justify-content: space-between;
    pointer-events: none;
}
.addToCartToggleButton footer div {
    display: flex;
    flex-direction: column;
}

.addToCartToggleButton .flare {
    color: #e07986 !important;
}
.addToCartToggleButton footer .toggleBreakSpace.indicator + div {
    flex: 6;
    text-align: left;
    padding-left: 1rem; 
}
.toggleBreakSpace.price {
    flex: 1;
}
.addToCartToggleBenefit .ebyicon-check-thin:before {
    content: '\e837';
    position: relative;
    right: 5px;
}
.addToCartToggleBenefit i{
    font-family: "eby";
    font-size: 2.2rem;
}
.addToCartToggleBenefit.bold {
    font-weight: 500;
}
.addToCartToggleIndicatorLight:before {
    width: 16px;
    height: 16px;
    background: #efeff2;
    border-radius: 50px;
    position: absolute;
    content: "";
    z-index: 1;
    top: 3px;
    left: 3px;
}
.addToCartToggleIndicator {
    display: flex;
    align-items: center;
    justify-content: center;
}
.addToCartToggleTitle {
    flex: 1;
    padding-left: 1rem;
    text-align: left;
    text-transform: uppercase;
}
.addToCartTogglePrice {
    flex: 1;
    text-align: right;
    position:relative;
    max-width: 74px;
}
.addToCartToggleIndicatorLight {
    width: 24px;
    height: 24px;
    border: 1px solid #7f8397;
    border-radius: 50px;
    position: relative;
    background: transparent;
}
.addToCartToggleButton.active .addToCartToggleIndicatorLight:before {
    background: #00082f;
}
.addToCartToggleButton.active .addToCartToggleIndicatorLight {
    border: 1px solid #00082f;
    background: #fff;
}
.proBoxInfo .proButton.mb20 button#AddToCart {
  margin-top:1.6rem;
}
.proButton.mb20 .addToCartPdpWrapper.subscribe-active button#AddToCart,
.proButton.mb20 .addToCartPdpWrapper.onetime-active button#AddBoxToCart {
  display:none;
}

  
/* ------- pdp -----------*/
.ebyGifcardPdp .proPrice.flexRow.flexAlignCenter:after {content: "* Get 10% off with code GIFT10";display: block;width: 100%;font-size: 1.2rem;font-weight: 300;color: #d0021b !important;}
 .pdp .mobile-intro{
     padding: 0;
}
 .pdp .proBoxInfo{
     padding: 0;
}
 .pdp .proBoxInfo .proButton{
     margin:0;
     max-width: 100%;
}
 .pdp .proBoxInfo .formAddToCart{
     margin-top:0;
}
 .eby_pm_icon_listing{
     margin-top: 45px;
}
/* rebuy wiget */
 .pdp .ebyPdpRelatedProductsWrapper{
     width: 100%;
     order: 1;
     max-width: 1330px;
     margin-bottom: 10px;
     overflow-x: auto;
     overflow-y: hidden;
}
 .eby-line-splitter-2022 {
     width: 100%;
     height: 1px;
     background-color: var(--container-line-splitter-color);
     margin: 47px auto 0;
}
 .eby-pdp-container-2022{
     margin-left: 30px;
     margin-right: 30px;
}
 .eby-title-block-pdp-2022{
     margin: 0 auto;
     margin-top: 33px;
}
 .pdp .col-xs-12.col-md-6.col-lg-6.mb30.proBoxInfo_outr{
     max-width: 41%;
     width: 100%;
}
.template-product .proBoxInfo .formAddToCart .velaGroup .proButton .btn{
   background: var(--eby-main-dark-color);
   border: var(--rebuy-text-color-2);
}
 .radioTypeColors .radioTypeColors-tab .swatch-variant-name{
     color: var(--light-gray-color);
}
 .pdp .proBoxInfo h2, .pdp .proBoxInfo h4 {
     color: var(--rebuy-text-color) 
}
.pdpCollapsibleDetailsWrapper {
    padding: 0 !important;
    list-style: none;
    border-bottom: 1px solid #bfc1cb;
}
.pdpCollapsibleDetailsWrapper .collapsible-header h3{
    font-size: 1.75rem !important;
    margin-bottom: 0 !important;
} 
.pdpCollapsibleDetailsWrapper .collapsible-header {
    padding: 1.5rem 0 1.5rem;
    background: transparent;
    border-top: 1px solid #bfc1cb;
}
.pdpCollapsibleDetailsWrapper .collapsible-body {
    padding: 2rem 0;
/*     border-bottom: 1px solid #bfc1cb; */
}
.pdpCollapsibleDetailsWrapper ul {
    padding: 0 !important;
    list-style: none !important;
}
.pdp .pdpCollapsibleDetailsWrapper .details-content ul {
    margin: 0 auto !important;
}
  
.pdp .mobile-intro .subtitle h4{
  text-transform: initial;
  font-size: 12px;
  line-height: normal;
  font-weight: 300;
  color: #000c48;
  font-family: aktiv-grotesk,sans-serif;
  margin-top: 0;
  margin-bottom: 0;
}
li.active .accordion_arrow {
  background: url('https://cdn.shopify.com/s/files/1/0313/4062/5964/files/cdnicon-caret_up.svg') 50%;
  background-repeat:no-repeat;
}
.accordion_arrow {
  background: url('https://cdn.shopify.com/s/files/1/0313/4062/5964/files/cdnicon-caret_down.svg') 50%;
  background-repeat:no-repeat;
  width:20px;
  height:20px;
}
  .buttom-styling-001{
      margin-top: 33px;
      margin-bottom: 33px;
  }

/*----------Rebuy widget------------------*/
.pdp .ebyPdpRelatedProductsWrapper{
   padding:0;
   margin-left: 12px;
   margin-right: 12px;
}
#rebuy-id-5675{
   max-width: 100%;
}
#rebuy-id-5675 .rebuy-product-media{
   width: 100%;
}
.rebuy-widget.widget-type-product.widget-display-embed is-visible{
   width: initial;
   margin: 0;
   padding: 0;
   display: flex;
}
#rebuy-id-5675 .rebuy-product-block{
   padding: 0;
   min-width: 176px;
   width: 176px;
   display: flex;
   flex-wrap: wrap;
   margin: 0;
}
.rebuy-widget .rebuy-product-grid{
   width: initial;
   margin: 0;
   padding: 0;
   display: flex;
   margin-bottom: 48px;
   gap:12px;
}
#rebuy-id-5675 .rebuy-product-actions .rebuy-button{
   padding: 0;
   width: 100%;
   height: 48px;
   background: var(--rebuy-widget-background);
   border: var(--rebuy-widget-border);
   border-radius: var(--rebuy-widget-border-radius);
   color: var( --product-name-color);
   font-size: var(--rebuy-widget-font-size);
   line-height: normal;
   position: initial;
}
.rebuy-product-actions-button-text{
   padding: 8px;
   display: flex;
   justify-content: space-between;
}
#rebuy-id-5675 .rebuy-product-options{
   position:relative;
 height: 48px;
 background-color: #E5E2E9;
  border-radius: 4px;
  margin-top: 12px;
}
#rebuy-id-5675 .rebuy-product-options .rebuy-select-block{
  height:33px;
}
#rebuy-id-5675 .rebuy-title-container {
   display: flex;
   position: relative;
   z-index: 1;
   max-width: 100%;
   top: 0;
   cursor: pointer;
   margin:0;
   padding:0;
 justify-content: space-between;
     margin-left: 10px;
  margin-right: 10px;
}
#rebuy-id-5675 .rebuy-product-info a{
   font-size: var(--rebuy-widget-font-size);
   line-height: 1.43;
   color: var(--rebuy-text-color);
   display: block;
   font-weight: 400;
   margin: 0;
}
#rebuy-id-5675 .rebuy-arrow{
   width:13px !important;
   object-fit: cover;
   height: 100%;
}
.rebuy-title-container img {
   visibility: initial;
}
.rebuy-product-info-subscriber-text-2022 {
   font-size: var(--rebuy-widget-font-markup-size);
   color: var(--rebuy-widget-color-grey);
   float: right;
   line-height: 1.2;
   margin-top: 6px;
   display:none;
}
.r---product-title---22, .r---product-fabric---22 {
   font-size: var(--rebuy-tablet-font-size);
   font-family: aktiv-grotesk;
   font-weight: 500;
   color: var(--rebuy-text-color);
   line-height: 1.43;
}
.r---product-color---22 {
   font-size: var(--rebuy-widget-font-size);
   font-family: aktiv-grotesk;
   color: var(--rebuy-text-color);
   font-weight: 300;
   letter-spacing: 0;
   line-height: 1.67;
   margin-top: 1px;
}
.pdp h2.eby-pdp-container-2022 {
   font-family: aktiv-grotesk;
   font-size: var(--rebuy-widget-font-size-main);
   font-weight: 500;
   color: var(--rebuy-text-color-2);
   margin-top: 4px;
   margin-bottom: 4px;
   text-align: left;
   width: 100%;
   height: auto;
   line-height: 48px;
   padding: 0 2rem;
   margin-right: 0;
   margin-left: 0;
}
#rebuy-id-5675 .rebuy-select-options .options {
   list-style: none;
   padding: 0;
   margin: 0;
   width: 100%;
   display: flex;
   flex-direction: row;
   flex-wrap: wrap;
   justify-content: space-around;
}
#rebuy-id-5675 .rebuy-select-options .single-select {
   border: 1px solid rgba(0,67,95,.6);
   border-radius: 4px;
   height: 30px;
   width: 42px;
   font-size: var(--rebuy-widget-font-size);
   margin: 0 0 10px 0;
   color: #000c48;
   text-align: center;
   cursor: pointer;
   display: inline-block;
   text-transform: uppercase;
   display: inline-table;
}
#rebuy-id-5675 .rebuy-product-block:nth-child(even) .rebuy-select-options, .rebuy-select-options {
   position: absolute;
   background: #fff;
   border: var(--rebuy-widget-border);
   padding: 9px 4px 0px;
   display: none;
   z-index: 10;
   width: 100%;
   border-radius: 4px;
   height: 212px; /*fc 091922*/
}
 #rebuy-id-5675 .rebuy-product-block{
     width: 164px;
     min-width:137px;
     padding: 0;
}
 .rebuy-product-actions{
     margin-top: 6px;
}
.rebuy-product-actions-button-text span{
   font-size: 12px;
   font-weight: 500;
   line-height: 1.33;
   letter-spacing: 0.2px;
   color:var( --rebuy-text-color) 
}
#rebuy-id-5675 .rebuy-product-media{
  max-height: initial;
  padding-bottom: 0;
}

#rebuy-id-5675 .rebuy-product-media a.rebuy-product-image, #rebuy-id-8084 .rebuy-product-media a.rebuy-product-image{
  max-width: 100%;
  max-height:100%;
}
#rebuy-id-5675 .rebuy-product-media img, #rebuy-id-8084 .rebuy-product-media img{
  max-width:240px;
  max-height:initial;
}

#rebuy-id-5675 .rebuy-product-block:nth-child(even) .rebuy-select-options, 
.rebuy-select-options{
  top: -176px;
}
.eby-parent-container-2022 {
    max-width: 1050px;
    margin: 0 auto !important;
}

.pdp .col-xs-12.col-md-6.col-lg-6.mb30.proBoxInfo_outr{
  max-width: 100%;
}
#subscription-style-special{
  padding: 0;
  background-color: #FFF;
  color: #4a90e2;
  font-size: 13px;
  margin: 0;    
  display: inline-block;
}
.eby-savings-a-subscribe{
  color: #4a90e2;
}
  
/*************************** Tablet ****************************/
@media (min-width: 768px){
  .isMblBundleBras .isBundleBraExtra23 {
    display: none;
  }
  .isBundleBras .isBundleBraExtra23 {
    display: block;
  }
  .rebuy-addon__item-image {
    max-width: 96px;
  }
  .template-product .proBoxPrimary.mb30 {
    max-width: 85%;
  }
  .rebuy-addon__item-info {
    width: 80%;
  }
  .rebuy-addon__item-checkbox {
    width: 3%;
  }
  .eby-container-pdp-2022{
     margin: auto 84px;
  }
  .eby-parent-container-2022 {
     margin: auto 84px;
  }
  .eby-line-splitter-2022 {
     width: 100%;
  }
  .pdp .ebyPdpRelatedProductsWrapper {
     padding: 0 2rem;
  }
  .pdp .ebyPdpRelatedProductsWrapper{
     align-items: normal;
  }
  .eby-title-block-pdp-2022{
     margin: 0;
     margin-top: 33px;
  }
  /* ------ Rebuy ----- */
  #rebuy-id-5675{
     margin-left:0;
  }
  .r---product-title---22, .r---product-fabric---22{
     line-height: 1.43;
     height: 20px;
     font-size: var(--rebuy-tablet-font-size);
     font-weight: normal;
     margin-top: 2.3px;
  }
  .r---product-color---22{
     line-height: 1.54;
     font-size: var(--rebuy-tablet-font-size-xs);
     margin-top: 2.9px;
  }
  .rebuy-5675-pdp-2022{
     margin-left:0;
  }
  .rebuy-product-actions-button-text span{
     line-height: 1.23;
     letter-spacing: normal;
     height: 18.3px;
     font-size: var(--rebuy-tablet-desc-font-size) 
  }
  #rebuy-id-5675 .rebuy-product-actions .rebuy-button{
     height: 27.4px;
  }
  .rebuy-product-info-subscriber-text-2022{
     line-height: 1.2;
     height: 6.9px;
     font-size: var(--rebuy-tablet-xs-font-size) 
  }
  #rebuy-id-5675 .rebuy-product-info a{
     font-size:var(--rebuy-tablet-desc-font-size);
     line-height: 2.43;
  }
  #rebuy-id-5675 .current-size, #rebuy-id-5675 .siz-guid-container .siz_guid{
     font-size: var(--rebuy-tablet-font-size);
  }
  #rebuy-id-5675 .rebuy-select-options .single-select{
     font-size: var(--rebuy-tablet-desc-font-size);
     height: 28px;
     margin: 0 0px 10px 0px;
  }
  .pdp .ebyPdpRelatedProductsWrapper {
     margin-left: 0;
     margin-right: 0;
     padding:0 2rem;
  }
  #rebuy-id-5675, #rebuy-id-8084 {
  /*          min-width: 600px; */
     margin: 0 auto;
     width: 100%;
  }
  .rebuy-id-5675, #rebuy-id-8084 {
     margin-left: auto;
     margin-right: auto;
  }
  .rebuy-product-info {
     margin-top: 4px;
  }
  #rebuy-widget-5675.rebuy-widget{
     width: 100%;
  }
  .eby-pdp-container-2022{
     margin-left:0;
  }
  .rebuy-widget .rebuy-product-grid{
     overflow-x:hidden;
  }
  #rebuy-id-5675 .rebuy-product-block:nth-child(even) .rebuy-select-options, .rebuy-select-options{
     margin-left: 0;
  }
  .pdp h2.eby-pdp-container-2022{
     margin-left:0;
  }
  .rebuy-widget .rebuy-product-grid, .rebuy-recommended-products .rebuy-product-grid {
     gap: 17px;
     margin-top: 22px;
  }
  #rebuy-id-5675 .rebuy-product-block, #rebuy-id-8084 .rebuy-product-block {
     margin: 0 0 7px;
     width: 100%;
     max-width:240px;
  }

  #rebuy-id-5675 .rebuy-product-options{
   height: 27.4px;
  }
  #rebuy-id-5675 .rebuy-product-options .rebuy-select-block{
   height:22px;
  }
  #rebuy-id-5675 .rebuy-arrow{
   width: 8px !important;
  }

  #rebuy-id-5675 .rebuy-product-media img, #rebuy-id-8084 .rebuy-product-media img{
      max-height: initial;
      max-width: 240px;
  }
  .rebuy-widget .rebuy-product-grid{
       margin-bottom: 0;
  }
  #rebuy-id-5675 .rebuy-product-block:nth-child(even) .rebuy-select-options, 
  .rebuy-select-options {
       top: -114px;
  }
  #rebuy-id-5675 .current-size, #rebuy-id-8084 .current-size{
       margin-top: 0.9rem;
  }
  /*---------Title, price, swatches-------------*/
   .pdp .proBoxInfo .proButton{
       margin-top: 24px;
  }
   .eby_pm_icon_listing{
       margin-top: 55px;
       margin-bottom:1rem;
  }
  /*-------- details -------------*/
   .pdp .product-details-tab{
       width: 100%;
       padding:0 2rem;
  }
   .pdp .product-details-tab .details-content{
       max-width: 100%;
  }
   .pdp .product-details-tab .details-content-background{
       background: #FFFFFF;
  }
   .pdp .product-details-tab .details-content{
       padding: 0;
       padding-bottom: 50px;
       padding-top: 25px;
  }
  .pdp .proBoxPrimary .col-xs-12.col-md-6.col-lg-6.mb30.proBoxInfo_outr{
    padding: 0; /* fc 031023 */
  }
}
/*************************** Laptop ****************************/
@media(min-width: 1024px){
  .pdp .col-xs-12.col-md-6.col-lg-6.mb30.proBoxInfo_outr{
    max-width: 450px;
  }
  .template-product .proBoxPrimary.mb30{
    max-width: 1050px;
  }
  .pdp .product-details-tab .details-content-background,
  .pdp .guarantee-block{
    max-width: 1050px;
    margin: 0 auto;
  }
  .pdp h2.eby-pdp-container-2022 {
    padding:0;
  }
  #rebuy-id-5675 .rebuy-product-media a.rebuy-product-image, #rebuy-id-8084 .rebuy-product-media a.rebuy-product-image{
    max-height: auto;
    max-width: auto;
  }
  #rebuy-id-5675 .rebuy-product-media{
    max-height: initial;
    height: auto;
  }
  .pdp .product-details-tab {
    padding: 0; 
  }
  .ebyPdpRelatedProductsWrapper .r---product-title---22, .r---product-fabric---22{
   line-height: 15.2px;
   height: 15.2px;
   margin-top: 3px;
  }
  .ebyPdpRelatedProductsWrapper .r---product-color---22{
   line-height: 1.54;
   font-size: var(--rebuy-laptop-desc-font-size);
   margin-top: 3.8px;
  }
  .rebuy-product-info-subscriber-text-2022{
     font-size:var(--rebuy-laptop-xs-font-size);
  }
  #rebuy-id-5675 .rebuy-product-info a{
     font-size: var(--rebuy-laptop-desc-font-size);
     line-height: 2;
  }
  .rebuy-product-info {
     margin-top: 8.5px;
  }
  .rebuy-product-actions-button-text{
     padding: 5.3px 8.4px 6.9px 7.6px 
  }
  .rebuy-product-actions-button-text span{
   font-size: var(--rebuy-laptop-desc-font-size);
   line-height: 24.4px;
   height: 24.4px;
  }
  #rebuy-id-5675 .rebuy-product-actions .rebuy-button{
     height:36.6px 
  }
  #rebuy-id-5675 .current-size, #rebuy-id-5675 .siz-guid-container .siz_guid{
     font-size: var(--rebuy-laptop-font-size);
  }
  #rebuy-id-5675 .rebuy-select-options .single-select{
     font-size: var(--rebuy-laptop-desc-font-size);
  }
  .rebuy-widget .rebuy-product-grid, .rebuy-recommended-products .rebuy-product-grid{
    gap: 3%;
    height: auto;
    margin-top: 28px;
  }
  .eby-title-block-pdp-2022{
     margin-top: 0;
  }
  .pdp .proBoxPrimary.mb30.detail_default .row{
     justify-content: flex-start;
  }
  #rebuy-id-5675 .rebuy-product-block{
     width: 100%;
     height: auto;
     max-width:240px;
  }
  #rebuy-id-5675 .rebuy-product-media img, #rebuy-id-8084 .rebuy-product-media img{
    max-width:100%;
    max-height:100%;
  }
  #rebuy-id-5675 .rebuy-product-block:nth-child(even) .rebuy-select-options, .rebuy-select-options{
    padding: 9px 0 9px;
    height: auto; /*fc 091922*/ 
  }
  /*--------Price title----------*/
   .pdp .col-xs-12.col-md-6.col-lg-6.mb30.proBoxInfo_outr{
       width: 80%;
  }
   .pdp .proBoxInfo{
       max-width:100%;
  }
   .pdp .ebyPdpRelatedProductsWrapper{
       max-width: 1570px;
       padding:0 0;
  }
   .pdp .proBoxInfo_outr .proBoxInfo{
       padding: 0 51px 0;
  }
}
/*************************** desktop ****************************/
@media(min-width: 1440px){
  .pdp h2.eby-pdp-container-2022 {
   padding:0;
  }
  #rebuy-id-5675 .rebuy-product-media a.rebuy-product-image, #rebuy-id-8084 .rebuy-product-media a.rebuy-product-image{
     max-width: 240px;
  }
  #rebuy-id-5675 .rebuy-product-media{
     height:300px;
  }
  .ebyPdpRelatedProductsWrapper .r---product-title---22, .r---product-fabric---22{
     height:20px;
     line-height:20px;
     font-size:var(--rebuy-desktop-font-size);
     margin-top:4px;
  }
  .ebyPdpRelatedProductsWrapper .r---product-color---22{
     height:20px;
     line-height:20px;
     font-size:var(--rebuy-desktop-desc-font-size);
     margin-top:5px;
  }
  .rebuy-product-info-subscriber-text-2022{
     font-size: var(--rebuy-desktop-xs-font-size);
     line-height: 0.2;
  }
  #rebuy-id-5675 .rebuy-product-info a{
     line-height: 1.7;
     font-size:var(--rebuy-desktop-desc-font-size);
  }
  .rebuy-product-info {
  }
  .rebuy-product-actions-button-text{
     padding: 7px 11px 9px 10px;
  }
  .rebuy-product-actions-button-text span{
     height: 32px;
     line-height:32px;
     font-size:var(--rebuy-desktop-desc-font-size) 
  }
  #rebuy-id-5675 .rebuy-product-actions .rebuy-button{
     height:48px;
  }
  #rebuy-id-5675 .current-size, #rebuy-id-5675 .siz-guid-container .siz_guid{
  }
  #rebuy-id-5675 .rebuy-select-options .single-select{
  }
  .rebuy-widget .rebuy-product-grid, .rebuy-recommended-products .rebuy-product-grid{
     gap: 23px;
     height: 560px;
  }
  .pdp .proBoxInfo_outr .proBoxInfo{
     padding: 0 107px 0;
  }
  #rebuy-id-5675 .rebuy-product-block{
     width: 240px;
     height: 300px;
  }
  #rebuy-id-5675 .rebuy-product-media img, #rebuy-id-8084 .rebuy-product-media img {
     max-height: 300px;
  }
  #rebuy-id-5675 .rebuy-product-media a.rebuy-product-image, #rebuy-id-8084 .rebuy-product-media a.rebuy-product-image{
     max-height: 300px;
  }
  #rebuy-id-5675 .rebuy-product-media, #rebuy-id-8084 .rebuy-product-media{
     max-height: 300px;
  }
  #rebuy-id-5675 .rebuy-product-options{
    height:48px;
  }
  #rebuy-id-5675 .rebuy-product-options .rebuy-select-block{
    height:33px;
  }
  #rebuy-id-5675 .rebuy-arrow{
    width: 14px !important;
  }
  #rebuy-id-5675 .rebuy-title-container{
    margin-left: 12px;
    margin-right: 12px;
  }
}

.rebuy-widget .rebuy-product-grid.small-carousel{
  flex-wrap: nowrap;
    max-width: 100%;
}
.rebuy-widget select.rebuy-select {
  background-color: var(--eby-light-gray);
  color: var(--eby-main-dark-color);
}


</style>

{% assign isOnDealSale = false %}
{% assign isLiquidation = false %}
{% assign isOnHolidaySale = false %}
    {% for prodTag in product.tags %}
    {% if prodTag contains "julyfourthsale2023" %}
    {% assign isOnHolidaySale = true %}
    {% endif %}
    {% if prodTag contains "lightningDeal-" %}
      {%- assign prodDealPrice = prodTag | replace: "lightningDeal-", "" -%}
      {% assign isLiquidation = true %}
    {% endif %}
    {% if prodTag contains "capsuleDeal-" %}
      {%- assign prodDealPrice = prodTag | replace: "capsuleDeal-", "" -%}
      {% assign isLiquidation = true %}
    {% endif %}
    {% endfor %}

  {% if isOnHolidaySale %}
    {% assign premSkuCodes = ""%}
    {% assign holidayDiscounts = "20%,20%,20%,20%,20%,20%,20%,30%,30%,30%,20%,30%,30%" | split: ',' %}
    {% assign holidayCodes = "BK,NU,FR,CW,RD,SK,PL,GD,TR,P5,RO,SY,MI" | split: "," %}
    {% assign currSkuCode = product.selected_or_first_available_variant.sku | slice: 7, 2 %}
    {% assign holidayCottonDiscounts = "50%,60%,50%,60%" | split: ',' %}
    {% assign holidayCottonCodes = "BO,LG,BK,FR" | split: "," %}

    {% if product.type contains "Silk" %}
        {% assign currSaleDiscount = "40%" %}
    {% elsif product.type == "Bodysuit" %}
        {% assign currSaleDiscount = "40%" %}
    {% elsif product.type == "Tank" %}
        {% for prodTag in product.tags %}
        {% if prodTag contains "julyfourthsale2023" %}
            {% if currSkuCode == "BO" %}
              {% assign currSaleDiscount = "40%" %}
            {% else %}
              {% assign currSaleDiscount = "25%" %}
            {% endif %}
        {% endif %}
        {% endfor %}
    {% elsif product.type == "Cotton Bralette" or product.type == "Cotton Underwear" %}
        {% if holidayCottonCodes contains currSkuCode %}
          {% for skuCode in holidayCottonCodes %}
            {% if currSkuCode == skuCode %}
              {% assign skuCodeIndex = forloop.index0 %}
              {% break %}
            {% endif %}
          {% endfor %}
        {% endif %}
      
        {% assign currSaleDiscount = holidayCottonDiscounts[skuCodeIndex] %}
    {% else %}
        {% if holidayCodes contains currSkuCode %}
          {% for skuCode in holidayCodes %}
            {% if currSkuCode == skuCode %}
              {% assign skuCodeIndex = forloop.index0 %}
              {% break %}
            {% endif %}
          {% endfor %}
        {% endif %}
      
        {% assign currSaleDiscount = holidayDiscounts[skuCodeIndex] %}
    {% endif %}

    {% comment %}
    {% assign currSaleDiscount = "40%" %}
    {% endcomment %}
    {% if currSaleDiscount == blank and product.type == "Core Bralette" %}
        {% if product.title contains "Skyway" %}
          {% assign currSaleDiscount = "30%" %}
        {% endif %}
    {% endif %}

{% else %}
    {% assign currSaleDiscount = "n_a" %}
{% endif %}

{% if product.type == "Core Underwear" or product.type == "Cotton Underwear" or product.type == "Shapewear" or product.type == 'Premium Underwear' %}

    {% for prodTag in product.tags %}
        {% if prodTag contains "pantyType-" %}
            {%- assign prodNameTitle = prodTag | replace: "pantyType-", "" -%}
        {% endif %}
        {% if prodTag contains "pantyColor-" %}
            {%- assign prodColorTitle = prodTag | replace: "pantyColor-", "" -%}
        {% endif %}
    {% endfor %}

{% elsif product.type == 'Mesh Underwear'  %}

    {% for prodTag in product.tags %}
        {% if prodTag contains "pantyType-" %}
            {%- assign prodNameTitle = prodTag | replace: "pantyType-", "" -%}
        {% endif %}
        {% if prodTag contains "pantyColor-" %}
            {%- assign prodColorTitle = prodTag | replace: "pantyColor-", "" -%}
        {% endif %}
    {% endfor %}

{% elsif product.type contains 'Silk '  %}
    {% for prodTag in product.tags %}
        {% if prodTag contains "Type-" %}
            {%- assign prodNameTitle = prodTag | split: "Type-" -%}
            {%- assign prodNameTitle = prodNameTitle | first -%}
        {% endif %}
        {% if prodTag contains "Color-" %}
            {%- assign prodColorTitle = prodTag | split: "Color-" -%}
            {%- assign prodColorTitle = prodColorTitle | last -%}
        {% endif %}
    {% endfor %}

{% elsif product.type == "Tank"  %}
  {%- assign prodNameTitle = "tank" -%}

    {% for prodTag in product.tags %}
        {% if prodTag contains "tankColor-" %}
            {%- assign prodColorTitle = prodTag | replace: "tankColor-", "" -%}
        {% endif %}
    {% endfor %}

{% elsif product.type == "Core Bra" %}
  {%- assign prodNameTitle = "only bra" -%}

    {% for prodTag in product.tags %}
        {% if prodTag contains "braletteColor-" %}
            {%- assign prodColorTitle = prodTag | replace: "braletteColor-", "" -%}
        {% endif %}
    {% endfor %}

{% elsif product.type == "Core Bra" or product.type == "Core Bralette" or product.type == "Cotton Bralette" or product.type == 'Premium Bralette' or product.type == 'Mesh Bralette'  %}
  {%- assign prodNameTitle = "bralette" -%}

    {% for prodTag in product.tags %}
        {% if prodTag contains "braletteColor-" %}
            {%- assign prodColorTitle = prodTag | replace: "braletteColor-", "" -%}
        {% endif %}
    {% endfor %}

{% elsif product.type == "Mask" %}
  {%- assign prodNameTitle = "mask" -%}

    {% for prodTag in product.tags %}
        {% if prodTag contains "maskColor-" %}
            {%- assign prodColorTitle = prodTag | replace: "maskColor-", "" -%}
        {% endif %}
    {% endfor %}

{% elsif product.type == "Wrap Top" %}
  {%- assign prodNameTitle = "wrap top" -%}

    {% for prodTag in product.tags %}
        {% if prodTag contains "wrapColor-" %}
            {%- assign prodColorTitle = prodTag | replace: "wrapColor-", "" -%}
        {% endif %}
    {% endfor %}

{% elsif product.type == "Bodysuit" %}
  {%- assign prodNameTitle = "bra bodysuit" -%}

    {% for prodTag in product.tags %}
        {% if prodTag contains "bodysuitColor-" %}
            {%- assign prodColorTitle = prodTag | replace: "bodysuitColor-", "" -%}
        {% endif %}
    {% endfor %}


{% elsif product.type == "Gift Cards" %}
  {%- assign prodNameTitle = "gift card" -%}

    {% for prodTag in product.tags %}
        {% if prodTag contains "cardColor-" %}
            {%- assign prodColorTitle = "sitewide" -%}
        {% endif %}
    {% endfor %}

{% elsif product.type == "Panty Pack" or product.type contains "Prebuilt" %}
  {%- assign prodNameTitle = "3 panty pack" -%}

    {% for prodTag in product.tags %}
        {% if prodTag contains "packColor-" %}
            {%- assign prodColorTitle = prodTag | replace: "packColor-", "" -%}
        {% endif %}
    {% endfor %}


{% elsif product.type == "Mask Pack" %}
  {%- assign prodNameTitle = "3 mask pack" -%}

    {% for prodTag in product.tags %}
        {% if prodTag contains "packColor-" %}
            {%- assign prodColorTitle = prodTag | replace: "packColor-", "" -%}
        {% endif %}
    {% endfor %}

{% elsif product.type == "Emissary Tank" or product.type == "XBusiness Tee" or product.type == "Crop Top" %}
  {%- assign prodNameTitle = product.title -%}
{% elsif product.type == "Bra Pack" %}
  {%- assign prodNameTitle = "Bra Pack" -%}
  
{% endif %}

{%- assign proImageSize = section.settings.image_size -%}
{%- assign current_variant = product.selected_or_first_available_variant -%}
{%- if product.description contains '[SHORTDESCRIPTION]' -%}
  {%- assign shortDescription = product.description | split:'[SHORTDESCRIPTION]' | first -%}
  {%- assign fullDescription = product.description | split:'[SHORTDESCRIPTION]' | last -%}
{%- else -%}
  {%- assign shortDescription = '' -%}
  {%- assign fullDescription = product.description -%}
{%- endif -%}
<input type="hidden" id="prod-style-key" value="{{ prodNameTitle }}::{{ prodColorTitle }}" />
<div class="container-full">
  <div class="pageCollectionInner{% if isLiquidation %} pdp-liq{% endif %}">
    <div class="productBox pdp{% if isOnHolidaySale %} holidaySaleItem{% endif %}" itemscope itemtype="http://schema.org/Product">
      <meta itemprop="url" content="{{ shop.url }}{{ product.url }}">
      <meta itemprop="image" content="{{ product.featured_image.src | img_url: 'grande' }}">
      <div itemprop="brand" itemtype="https://schema.org/Brand" itemscope>
        <meta itemprop="name" content="EBY" />
      </div>
      <meta itemprop="description" content="{{ product.metafields.ebyacf.new_desc_details.en }}" />
      
      <meta itemprop="sku" content="{{ product.selected_or_first_available_variant.sku }}">
      <meta itemprop="gtin8" content="{{ product.selected_or_first_available_variant.sku }}">
      
    
        <div class="proBoxPrimary mb30 {{ section.settings.prodetail_style }}  eby-container-pdp-2022">
          <div class="row">
              
            {% include 'pdp-title-2022', isOnHolidaySale: isOnHolidaySale %}
              
            <!-- start of gallery  -->
            <div class="ab proBoxImage col-xs-12 col-md-12 col-lg-12 mb30{% if product.type contains "Surprise Panty Pack" %} spImgWrapper{% endif %}">
              {% include 'vela-prodetail-image-lite' %}
            </div>
            <div class="col-xs-12 col-md-6 col-lg-6 mb30 proBoxInfo_outr eby-title-block-pdp-2022">
              <!--include title of pdpd -->
              
              <div class="proBoxInfo{% if product.type == "Cotton Underwear" or product.type == "Cotton Bralette" %} isCotton{% endif %}">
                {% if product.metafields.ebyacf.has_subscription_upsell_online %}
                    {% include 'vela-prodetail-info-subUpsell-lite' %}
                {% else %}
                  {% include 'vela-prodetail-info-lite' %}
                {% endif %}
              </div>

            </div>
          </div>
        </div>
                <div class="product-details-tab">
                    <div class="details-content-background">
                        <div class="details-content">
                            <ul class="collapsible pdpCollapsibleDetailsWrapper">
                              <li class="active">
                                <div class="collapsible-header"><h3>Details</h3><i class="accordion_arrow"></i></div>
                                <div class="collapsible-body">
                                  {{ product.metafields.ebyacf.new_desc_details.en }}
                                  <div class="multiple-details">
                                      {{ product.metafields.ebyacf.new_spec_details.en }}
                                  </div>
                                </div>
                              </li>
                              <li>
                                <div class="collapsible-header"><h3>Mission</h3><i class="accordion_arrow"></i></div>
                                <div class="collapsible-body">
                                  <div class="content_body">{{ product.metafields.ebyacf.new_women_empower_details.en }}</div>
                                  <div class="content_body">{{ product.metafields.ebyacf.new_manufacture_rule_details.en }}</div>
                                </div>
                              </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="guarantee-block">
                    <h2>EBY Fit Guarantee</h2>
                    <p>Free exchanges all eligible orders.</p>
                  <a href="/pages/faq" class="guarantee-blockLink" target="_blank">See More Details <span class="ebyicon-link-arrow learnMoreSubLink"></span></a>
                </div>
            </div>
          
            {% unless product.type == "Panty Pack" or product.type == "Surprise Panty Pack" or product.type contains "Prebuilt" or product.type == "Premium Bralette" or product.type == "Gift Cards" or product.type == "Mesh Underwear"  or product.type == "Wrap Top" %}

            {% endunless %}
          
            {% if product.type == "Premium Bralette" %}

            {% endif %}
        </div>


        {% if section.settings.image_picker_1 != blank %}
          <div class="cus-image-section cus-image-section-1">
          <a href="{% if section.settings.image_picker_1_url != blank %}{{ section.settings.image_picker_1_url }}{% else %}javascript:void(0);{% endif %}" ><img class="lazyload" data-src="{{ section.settings.image_picker_1 | img_url:'master' }}" style="width:100%" alt="Image 1" /></a>
        </div>
        {% endif %}
        {% if section.settings.image_picker_2 != blank %}
          <div class="cus-image-section cus-image-section-2">
          <a href="{% if section.settings.image_picker_2_url != blank %}{{ section.settings.image_picker_2_url }}{% else %}javascript:void(0);{% endif %}" ><img class="lazyload" data-src="{{ section.settings.image_picker_2 | img_url:'master' }}" style="width:100%" alt="Image 2" /></a>
        </div>
        {% endif %}
        {% if section.settings.image_picker_3 != blank %}
          <div class="cus-image-section cus-image-section-3">
            <a href="{% if section.settings.image_picker_3_url != blank %}{{ section.settings.image_picker_3_url }}{% else %}javascript:void(0);{% endif %}" ><img class="lazyload" data-src="{{ section.settings.image_picker_3 | img_url:'master' }}" style="width:100%" alt="Image 3" /></a>
          </div>
        {% endif %}
      
    </div>
    {% if product.type == "Surprise Panty Pack" %}
        {% assign mysteryPackKeyStr = "" %}
      {% for prodTag in product.tags %}
          {% if prodTag contains "mpProds_" %}
            {% assign mysteryPackKeyStr = mysteryPackKeyStr | append: "::" | append: prodTag %}
          {% endif %}
        {% endfor %}
        <input type="hidden" id="hidden_mpid" value="{{ product.id }}" />
        <input type="hidden" id="hidden_mpo-{{ product.id }}" value="{{ mysteryPackKeyStr }}" />
    {% endif %}
  </div>
</div>

<div class="pdp-reviews-block">
  <div class="testm_slider">
      <h2>{{ section.settings.product_review_section_title }}</h2>
      <div class="rev_sect">
          
        <!--Stamped - Begin Main Widget -->
        <div 
        id="stamped-main-widget"   
        data-product-id="{{ product.id }}"   
        data-name="{{ product.title | escape }}"   
        data-url="{{ shop.url }}{{ product.url }}"   
        data-image-url="{{ product.featured_image | product_img_url: "large" |replace: '?', '%3F' | replace: '&','%26'}}" 
        data-description="{{ product.description | escape }}"   
        data-product-sku="{{product.selected_or_first_available_variant.sku}}"
        data-product-title="{{product.title}}" 
        data-product-type="{{product.type}}">
        </div>
        <!-- Stamped - End Main Widget -->   

      </div>
  </div>
</div>

<div class="pop_size size_guid_pdp">
  <div class="pop_inner">
    <div class="pop_wrap">
      <span class="colz_pop size_guid_pdp">&times;</span>
      <div class="ebyGuideChartWrapper">
        {{ shop.metafields.ebyacf.eby_size_chart-panty.en }}
      </div>
    </div>
    <div class="pop_wrapper_backing size_guid_pdp">&nbsp;</div>
  </div>
</div>

<div class="pop_size rebuy" style="display: none;" >
    <div class="pop_inner">
        <div class="pop_wrap">
        <span class="colz_pop rebuy">×</span>
        <div class="ebyGuideChartWrapper">
            <div class="ebyDesktop-guideWrapper">
              <p class="ebyPantyGuide"><img data-src="https://cdn.shopify.com/s/files/1/0313/4062/5964/files/sizeguide---panty---color-coded.jpg" class="fr-fic fr-dib lazyload"></p>
              <p class="ebyBraletteGuide"><img data-src="https://cdn.shopify.com/s/files/1/0313/4062/5964/files/sizeguide---bralette---color-coded.jpg" class="fr-fic fr-dib ls-is-cached lazyload"></p>
              <p class="ebyTankGuide"><img data-src="https://cdn.shopify.com/s/files/1/0313/4062/5964/files/sizeguide---tanktop---color-coded.jpg" class="fr-fic fr-dib lazyload"></p>
              <p class="ebyWrapGuide"><img data-src="https://cdn.shopify.com/s/files/1/0313/4062/5964/files/sizeguide---wraptop---color-coded.jpg" class="fr-fic fr-dib ls-is-cached lazyload"></p>
              <p class="ebyBodysuitGuide"><img data-src="https://cdn.shopify.com/s/files/1/0313/4062/5964/files/sizeguide---bodysuit---color-coded.jpg" class="fr-fic fr-dib ls-is-cached lazyload"></p>
            </div>
            <div class="ebyTablet-guideWrapper">
              <p class="ebyPantyGuide"><img data-src="https://cdn.shopify.com/s/files/1/0313/4062/5964/files/sizeguide---panty---color-coded.jpg" class="fr-fic fr-dib lazyload"></p>
              <p class="ebyBraletteGuide"><img data-src="https://cdn.shopify.com/s/files/1/0313/4062/5964/files/sizeguide---bralette---color-coded.jpg" class="fr-fic fr-dib ls-is-cached lazyload"></p>
              <p class="ebyTankGuide"><img data-src="https://cdn.shopify.com/s/files/1/0313/4062/5964/files/sizeguide---tanktop---color-coded.jpg" class="fr-fic fr-dib lazyload"></p>
              <p class="ebyWrapGuide"><img data-src="https://cdn.shopify.com/s/files/1/0313/4062/5964/files/sizeguide---wraptop---color-coded.jpg" class="fr-fic fr-dib ls-is-cached lazyload"></p>
              <p class="ebyBodysuitGuide"><img data-src="https://cdn.shopify.com/s/files/1/0313/4062/5964/files/sizeguide---bodysuit---color-coded.jpg" class="fr-fic fr-dib ls-is-cached lazyload"></p>
            </div>
            <div class="ebyMobile-guideWrapper">
              <p class="ebyPantyGuide"><img data-src="https://cdn.shopify.com/s/files/1/0313/4062/5964/files/sizeguide---panty---color-coded.jpg" class="fr-fic fr-dib lazyload"></p>
              <p class="ebyBraletteGuide"><img data-src="https://cdn.shopify.com/s/files/1/0313/4062/5964/files/sizeguide---bralette---color-coded.jpg" class="fr-fic fr-dib ls-is-cached lazyload"></p>
              <p class="ebyTankGuide"><img data-src="https://cdn.shopify.com/s/files/1/0313/4062/5964/files/sizeguide---tanktop---color-coded.jpg" class="fr-fic fr-dib lazyload"></p>
              <p class="ebyWrapGuide"><img data-src="https://cdn.shopify.com/s/files/1/0313/4062/5964/files/sizeguide---wraptop---color-coded.jpg" class="fr-fic fr-dib ls-is-cached lazyload"></p>
              <p class="ebyBodysuitGuide"><img data-src="https://cdn.shopify.com/s/files/1/0313/4062/5964/files/sizeguide---bodysuit---color-coded.jpg" class="fr-fic fr-dib ls-is-cached lazyload"></p>
            </div>
        </div>
        </div>
        <div class="pop_wrapper_backing rebuy">&nbsp;</div>
    </div>
</div>

<div style="display:none;" class="" data-width="640" data-height="auto" id="learnAboutMembership">
    <div class="updatePassword">
      <h3>Why Subscribe?</h3>
      <ul class="membeshipBenefitsListingWrapper">
        <li class="membershipBenefitListItem">
          <p>$39 for 3 panties</p>
        </li>
        <li class="membershipBenefitListItem">
          <p>Customize your box or enjoy our curated picks</p>
        </li>
        <li class="membershipBenefitListItem">
          <p>Delivery every 3 month, skip or cancel anytime</p>
        </li>
        <li class="membershipBenefitListItem">
          <p>Never pay for shipping</p>
        </li>
        <li class="membershipBenefitListItem">
          <p>Member-only pricing and early access to new arrivals</p>
        </li>
      </ul>
    </div>
</div> 

<!-- Back in stock modal structure -->
<div id="bis_modal" class="modal bis_modal">
  <div class="modal-content">
    <h4>Back In Stock Alert</h4>
    <p>We'll notify you about the {{ product.title }}</p>
    <form id="e_bis_form" class="e_bis_form">
      <div class="form_row">
        <label class="input_label" for="email" >Email</label>
        <input type="email" placeholder="" name="email" class="e_email_input e_input" />
      </div>
<!--       <div class="form_row">
        <label class="input_label" for="phone" >Phone <small>(optional)</small></label>
        <input type="tel" placeholder="" name="phone" class="e_phone_input e_input" />
      </div> -->
      <div class="form_row checkbox_row">
        <input type="checkbox" name="consent" class="e_checkbox_input" />
        <label class="input_label" for="consent" >By signing up, I agree to EBY's <a href="https://shop.join-eby.com/pages/privacy-policy" target="_blank">Privacy</a> and <a href="https://shop.join-eby.com/pages/terms-of-use" target="_blank">Terms of Use</a>. You may unsubscribe later.</label>
      </div>
      <button type="submit" id="waitlist-form-submit-btn" >KEEP ME POSTED</button>
    </form>
  </div>
</div>

{% schema %}
    {
        "name": "Vela Product Page",
        "settings": [
            {
                "type": "header",
                "content": "Settings"
            },
            {
                "type": "select",
                "id": "prodetail_style",
                "label": "Product Layout",
                "default": "detail_default",
                "options": [
                    {
                        "value": "detail_default",
                        "label": "Layout Default"
                    },
                    {
                        "value": "detail_style1",
                        "label": "Layout Style1"
                    },
                    {
                        "value": "detail_style2",
                        "label": "Layout Style2"
                    },
                    {
                        "value": "detail_style3",
                        "label": "Layout Style3"
                    }
                ]
            },
            {
                "type": "checkbox",
                "id": "product_available_enable",
                "label": "Show product available",
                "default": true
            },
            {
                "type": "checkbox",
                "id": "product_type_enable",
                "label": "Show product type",
                "default": true
            },
            {
                "type": "checkbox",
                "id": "product_vendor_enable",
                "label": "Show product vendor",
                "default": true
            },
            {
                "type": "checkbox",
                "id": "product_sku_enable",
                "label": "Show product SKU",
                "default": true
            },
            {
                "type": "checkbox",
                "id": "product_countdown_enable",
                "label": "Show Countdown",
                "default": true
            },
            {
                "type": "text",
                "id": "image_size",
                "label": "Image size",
                "default": "480x480",
                "info": "Image size is required."
            },
            {
                "type": "header",
                "content": "Product Zoom"
            },
            {
                "type": "checkbox",
                "id": "product_zoom_enable",
                "label": "Enable",
                "default": true
            },
            {
                "type": "checkbox",
                "id": "product_scroll_zoom",
                "label": "Scroll zoom",
                "info": "Allow zoom on mousewheel, true to activate",
                "default": true
            },
            {
                "type": "select",
                "id": "product_zoom_type",
                "label": "Zoom type",
                "default": "window",
                "options": [
                    {
                        "value": "window",
                        "label": "Window"
                    },
                    {
                        "value": "inner",
                        "label": "Inner"
                    },
                    {
                        "value": "lens",
                        "label": "Lens"
                    }
                ]
            },
            {
                "type": "text",
                "id": "product_zoom_width",
                "label": "Zoom window width",
                "info": "Use with zoom type Window",
                "default": "500"
            },
            {
                "type": "text",
                "id": "product_zoom_height",
                "label": "Zoom window height",
                "info": "Use with zoom type Window",
                "default": "600"
            },
            {
                "type": "text",
                "id": "product_lens_size",
                "label": "Lens size",
                "info": "Use with zoom type Lens",
                "default": "200"
            },
            {
                "type": "select",
                "id": "product_lens_type",
                "label": "Lens type",
                "info": "Use with zoom type Lens",
                "default": "square",
                "options": [
                    {
                        "value": "square",
                        "label": "Square"
                    },
                    {
                        "value": "round",
                        "label": "Round"
                    }
                ]
            },
            {
                "type": "header",
                "content": "Product Collections"
            },
            {
                "type": "checkbox",
                "id": "product_collection_enable",
                "label": "Show product collections",
                "default": true
            },
            {
                "type": "text",
                "id": "product_collection_title",
                "label": "Box categoies title"
            },
            {
                "type": "range",
                "id": "product_coll_limit",
                "min": 2,
                "max": 10,
                "step": 1,
                "unit": "pcs",
                "label": "Limit",
                "default": 6
            },
            {
                "type": "header",
                "content": "Product Short Description"
            },
            {
                "type": "radio",
                "id": "product_short_description",
                "label": "Choose type",
                "options": [
                    {
                        "value": "no",
                        "label": "Don't show"
                    },
                    {
                        "value": "yes",
                        "label": "Show short description"
                    },
                    {
                        "value": "full",
                        "label": "Show full description"
                    }
                ],
                "default": "yes",
                "info": "Use tag [SHORTDESCRIPTION] on product description."
            },
            {
                "type": "header",
                "content": "Product More Info"
            },
            {
                "type": "radio",
                "id": "product_tab_type",
                "label": "Choose type",
                "options": [
                    {
                        "value": "disable",
                        "label": "Don't Show"
                    },
                    {
                        "value": "protab",
                        "label": "Tab More Info"
                    },
                    {
                        "value": "propanel",
                        "label": "Panel More Info"
                    }
                ],
                "default": "protab"
            },
            {
                "type": "checkbox",
                "id": "product_tab1_enable",
                "label": "1st Enable tab",
                "default": true
            },
            {
                "type": "text",
                "id": "product_tab1_title",
                "label": "1st Heading tab",
                "default": "Details"
            },
            {
                "type": "checkbox",
                "id": "product_tab2_enable",
                "label": "2nd Enable tab"
            },
            {
                "type": "text",
                "id": "product_tab2_title",
                "label": "2nd Heading tab"
            },
            {
                "type": "textarea",
                "id": "product_tab2_content",
                "label": "2nd Tab content"
            },
            {
                "type": "checkbox",
                "id": "product_tab3_enable",
                "label": "3rd Enable FAQs"
            },
            {
                "type": "text",
                "id": "product_tab3_title",
                "label": "3rd Heading tab"
            },
            {
                "type": "checkbox",
                "id": "product_tab4_enable",
                "label": "4th Enable tab",
                "default": true
            },
            {
                "type": "text",
                "id": "product_tab4_title",
                "label": "4th Title tab",
                "default": "Reviews"
            },
      {
                "type": "header",
                "content": "Dynamic checkout buttons"
            },
            {
                "type": "checkbox",
                "id": "dynamic_check_enable",
                "label": "Enable Dynamic Checkout Button",
                "default": true
            },
            {
                "type": "checkbox",
                "id": "buyit_check_enable",
                "label": "Enable Buy It Now Button",
                "default": true
            },
            {
                "type": "header",
                "content": "Product Social Sharing"
            },
            {
                "type": "checkbox",
                "id": "product_social_enable",
                "label": "Enable",
                "default": true
            },
            {
                "type": "text",
                "id": "product_social_title",
                "label": "Heading"
            },
            {
                "type": "checkbox",
                "id": "product_social_facebook_enable",
                "label": "Show facebook sharing",
                "default": true
            },
            {
                "type": "checkbox",
                "id": "product_social_twitter_enable",
                "label": "Show twitter sharing",
                "default": true
            },
            {
                "type": "checkbox",
                "id": "product_social_google_enable",
                "label": "Show google plus sharing",
                "default": true
            },
            {
                "type": "checkbox",
                "id": "product_social_linkedin_enable",
                "label": "Show linkedin sharing"
            },
            {
                "type": "checkbox",
                "id": "product_social_pinterest_enable",
                "label": "Show pinterest sharing"
            },
            {
                "type": "header",
                "content": "Product Related"
            },
            {
                "type": "checkbox",
                "id": "product_related_enable",
                "label": "Enable"
            },
            {
                "type": "text",
                "id": "product_related_title",
                "placeholder": "Title for Block",
                "label": "Heading"
            },
            {
                "type": "text",
                "id": "product_related_limit",
                "placeholder": "Number. Ex: 8",
                "label": "Limit"
            },
            {
                "type": "header",
                "content": "Vela Instagram"
            },
            {
                "type": "checkbox",
                "id": "product_instagram_enable",
                "label": "Enable"
            },
            {
                "type": "checkbox",
                "id": "instagram_full",
                "label": "Full Width?"
            },
            {
                "type": "text",
                "id": "title",
                "label": "Title",
                "placeholder": "Title"
            },
            {
                "type": "text",
                "id": "subtitle",
                "label": "SubTitle",
                "placeholder": "SubTitle"
            },
      {
                "type": "text",
                "id": "userid",
                "label": "User Id (*)",
                "placeholder": "User Id",
                "default": "2292239002",
                "info": "[Where do I find User ID?](https:\/\/codeofaninja.com\/tools\/find-instagram-user-id)"
            },
            {
                "type": "text",
                "id": "accessToken",
                "label": "Access token (*)",
                "placeholder": "Access Token",
                "default": "2292239002.1677ed0.fac0c0ffe73643cd8f4838b89b4c11a3",
                "info": "[Where do I find Access Token?](http:\/\/instagram.pixelunion.net\/)"
            },
            {
                "type": "text",
                "id": "limited",
                "placeholder": "Ex:8",
                "label": "Limit The Number of Images",
                "default": "8"
            },
      {
                "type": "select",
                "id": "resolution",
                "label": "Resolution of images",
                "options": [
                    {
                        "value": "thumbnail",
                        "label": "Thumbnail (150x150)"
                    },
                    {
                        "value": "low_resolution",
                        "label": "Low Resolution (320x320)"
                    },
                    {
                        "value": "standard_resolution",
                        "label": "Standard Resolution (640x640)"
                    }
                ]
            },
            {
                "type": "checkbox",
                "id": "show_loadmore",
                "label": "Show Loadmore?",
                "default": true
            },
            {
                "type": "text",
                "id": "loadmore",
                "label": "Load more",
                "placeholder": "Button load more text"
            },
            {
                "type": "image_picker",
                "id": "image_picker_1",
                "label": "Image 1"
            },
            {
                "type": "url",
                "id": "image_picker_1_url",
                "label": "Image 1 URL"
            },
            {
                "type": "image_picker",
                "id": "image_picker_2",
                "label": "Image 2"
            },
            {
                "type": "url",
                "id": "image_picker_2_url",
                "label": "Image 2 URL"
            },
            {
                "type": "image_picker",
                "id": "image_picker_3",
                "label": "Image 3"
            },
            {
                "type": "url",
                "id": "image_picker_3_url",
                "label": "Image 3 URL"
            },
      {
              "type": "header",
              "content": "Product Review Section"
            },
            {
              "type": "checkbox",
              "id": "product_review_section_enable",
              "label": "Show product review section",
              "default": true
            },
            {
              "type": "text",
              "id": "product_review_section_title",
              "label": "Heading",
              "default": "What our customers are saying"
            }
        ],
        "blocks": [
            {
                "type": "item",
                "name": "FAQ Item",
                "settings": [
                {
                    "type": "text",
                    "id": "question",
                    "label": "Question"
                },
                {
                    "type": "textarea",
                    "id": "answer",
                    "label": "Answer"
                }
                ]
            },
            {
                "type": "item_size",
                "name": "Size Guide",
                "settings": [
                    {
                        "type": "collection",
                        "id": "size_collection",
                        "label": "Collection"
                    },
                    {
                        "type": "image_picker",
                        "id": "size_image",
                        "label": " Size Guide"
                    },
                    {
                        "type": "html",
                        "id": "size_desc",
                        "label": "Description",
                        "info": "Use HTML to format your text so it can be easily read"
                    }
                ]
            },
            {
                "type": "item_bundle",
                "name": "Bundle",
                "settings": [
                    {
                        "type": "paragraph",
                        "content": "This is only activated with the products that have the template product.bundle-2"
                    },
                    {
                        "type": "product",
                        "id": "target_product",
                        "label": "Target product"
                    },
                    {
                        "type": "product",
                        "id": "first_product",
                        "label": "First product"
                    },
                    {
                        "type": "product",
                        "id": "second_product",
                        "label": "Second product"
                    }
                ]
            }
        ]
    }
{% endschema %}




{%- assign product_target = product -%}
{%- assign isBundle = false -%}

{%- if template.suffix == "bundle" or template.suffix == "bundle-2" -%}
  {% for block in section.blocks %}
    {%- if block.type == "item_bundle" -%}
      {%- assign b_target_product = all_products[block.settings.target_product] -%}
      {%- if b_target_product.handle == product.handle -%}
        {%- assign b_first_product = all_products[block.settings.first_product] -%}
        {%- assign b_second_product = all_products[block.settings.second_product] -%}
        {%- assign product_target = b_first_product -%}
        {%- assign isBundle = true -%}
        {%- break -%}
      {%- endif -%}
    {%- endif -%}
  {% endfor %}

<style>
.template-product .proBoxInfo .formAddToCart-bundle>.swatches{margin:0}.template-product .proBoxInfo .formAddToCart-bundle .proVariants{display:block!important;width:inherit!important;padding:0!important;margin:0!important}.template-product .proBoxInfo .formAddToCart-bundle .js-swatch.swatches{border:none;padding:0;margin-top:0;margin-bottom:4rem}.template-product .proBoxInfo .formAddToCart-bundle .js-swatch.swatches:before{display:none}.template-product .proBoxInfo .formAddToCart-bundle .js-swatch.swatches .header{margin-bottom:20px;font-size:14px;line-height:normal;color:#00435f;font-weight:400;font-style:normal}.template-product .proBoxInfo .formAddToCart-bundle .js-swatch.swatches .header .siz_guid{position:static!important}.template-product .proBoxInfo .formAddToCart-bundle .js-swatch.swatches .swatch-selector{cursor:pointer;text-transform:uppercase;text-align:center}.template-product .proBoxInfo .formAddToCart-bundle .js-swatch.swatches .swatch-selector label{cursor:pointer}
</style>
<script type="text/javascript" defer>      
    var v = null;
    var v2 = null;
    var product = {{ product_target | json }};//console.log(product);
    var product2 = {{ b_second_product | json }};//console.log(product2);
    window.productInfo = null;
    window.product2Info = null;
    var selectCallback = function(variant, selector) {
      
      vela.productPage({
        money_format: '{{ shop.money_format }}',
        variant: variant,
        selector: selector
      });
    };
    console.log(': PDP script running :', vela.productPage);

    document.addEventListener("DOMContentLoaded", function() {
      $('body').addClass('velaCartAdding');

      let liteItem = {
          Name: "{{ product.title }}",
          ProductID: "{{ product.id }}",
          ImageURL: !!jQuery('.pdpImagePanel .active img')[0] ? jQuery('.pdpImagePanel .active img')[0].src : "",
          URL: window.location.href,
          Brand: "{{ product.vendor }}",
          Price: "{{ product.price | money_without_currency }}"
      };
      geq.event('Viewed Product Reclaim', liteItem);

      
      var productTempObj = "{{ product | json }}";
      console.log(': PDP script running docready :', productTempObj);

      if (jQuery('.klaviyo-bis-trigger').length > 0) {
        let backInStockCta = jQuery('.klaviyo-bis-trigger');

        var elems = document.querySelectorAll('.klaviyo-bis-trigger');
        var instances = M.Modal.init(elems);
  
        jQuery('body').on('submit', '#e_bis_form', function (ev) {
            ev.preventDefault();
            console.log(': custom back in stock init fire :');
        });
      }
  
      {% unless settings.free_gift_enabled == true and product.id == all_products[settings.free_gift_product].id -%}
      jQuery.ajax({
        url: "https://api.shopify-inventory.jtcinteractive.com/shop/eby-by-sofia-vergara.myshopify.com/multi_variant_locations/" + productTempObj.variants.reduce((acc,variant)=> {return acc  += "," + variant.id}, "").slice(1),
        beforeSend: function(){
          $('body').addClass('velaCartAdding');
        },
        success: function(data){
          window.productInfo = data[{{ product_target.id }}].product;
          jQuery.ajax({
            url: "https://api.shopify-inventory.jtcinteractive.com/shop/eby-by-sofia-vergara.myshopify.com/multi_variant_locations/" + productTempObj.variants.reduce((acc,variant)=> {return acc  += "," + variant.id}, "").slice(1),
            success: function(data2){
              window.product2Info = data2[{{ b_second_product.id }}].product;
              if(window.productInfo == null && window.product2Info == null){
                if($('#AddToCartText').attr('data-need-color') == undefined || $('#AddToCartText').attr('data-need-color') != 'true') {
                  $('#AddToCart').addClass('disabled').prop('disabled', true);
                  $('#AddToCartText').html("Sold Out");
                } else {
                  $addToCartText.attr('data-text','Sold Out');
                }
              }
              $('body').removeClass('velaCartAdding');
            },
            error: function(){
              if($('#AddToCartText').attr('data-need-color') == undefined || $('#AddToCartText').attr('data-need-color') != 'true') {
                $('#AddToCart').addClass('disabled').prop('disabled', true);
                $('#AddToCartText').html("Sold Out");
              } else {
                $addToCartText.attr('data-text','Sold Out');
              }
              $('body').removeClass('velaCartAdding');
            }
          });
        },
        error: function(){
          if($('#AddToCartText').attr('data-need-color') == undefined || $('#AddToCartText').attr('data-need-color') != 'true') {
            $('#AddToCart').addClass('disabled').prop('disabled', true);
            $('#AddToCartText').html("Sold Out");
          } else {
            $addToCartText.attr('data-text','Sold Out');
          }
          $('body').removeClass('velaCartAdding');
        }
      });
  
      new Shopify.OptionSelectors('productSelect', {
        product: {{ product_target | json }},
        onVariantSelected: selectCallback,
        enableHistoryState: true
      });
      {%- endunless %}
  

      $('.velaProductNavTabs li:first, .proDetailInfo .tab-content .tab-pane:first').addClass('active');
      $('.proDetailInfo .velaPanel:first .panel-collapse').addClass('in');
    
    
    
    });


    function searchStocks() {
      if(v != null && v2 != null && $('body').hasClass('velaCartAdding') == false) {
        //console.log('productInfo',window.productInfo);
        //console.log('product2Info',window.product2Info);
        if(window.productInfo != null && window.product2Info != null) {
          $('body').addClass('velaCartAdding');
          var s = window.productInfo.variants[v].inventoryItem.locations;
          //console.log('available',s[0].available);
          var s2 = window.product2Info.variants[v2].inventoryItem.locations;
          //console.log('available2',s2[0].available);
          if((s[0].available == 0 || s[0].available < 0) || (s2[0].available == 0 || s2[0].available < 0)){
            if($('#AddToCartText').attr('data-need-color') == undefined || $('#AddToCartText').attr('data-need-color') != 'true') {
              $('#AddToCart').addClass('disabled').prop('disabled', true);
              $('#AddToCartText').html("Sold Out");
            } else {
              $addToCartText.attr('data-text','Sold Out');
            }
          } else {
            if($('#AddToCartText').attr('data-need-color') == undefined || $('#AddToCartText').attr('data-need-color') != 'true') {
              $('#AddToCart').removeClass('disabled').prop('disabled', false);
              $('#AddToCartText').html("Add to Cart");
            } else {
              $addToCartText.attr('data-text','Add to Cart');
            }
          }
        } else {
          if($('#AddToCartText').attr('data-need-color') == undefined || $('#AddToCartText').attr('data-need-color') != 'true') {
            $('#AddToCart').addClass('disabled').prop('disabled', true);
            $('#AddToCartText').html("Sold Out");
          } else {
            $addToCartText.attr('data-text','Sold Out');
          }
        }
        $('body').removeClass('velaCartAdding');
      } else {
        if($('#AddToCartText').attr('data-need-color') == undefined || $('#AddToCartText').attr('data-need-color') != 'true') {
          $('#AddToCart').removeClass('disabled').prop('disabled', false);
          $('#AddToCartText').html("Add to Cart");
        } else {
          $addToCartText.attr('data-text','Add to Cart');
        }
      }
    };

    $(".template-product .proBoxInfo .swatch-element-bundle .swatch-selector").off('click').on('click', function() {
      $(this).parent().siblings().each(function( index ) {
        $( this ).find('.swatch-selector').removeClass('swatch-selected');
      });
      $(this).addClass('swatch-selected');
      if ($(this).closest('.proVariants').length > 0) {
        v = $(this).attr("product-id");
        $('.single-option-selector').val($(this).attr("data-value")).trigger('change');
      } else {
        v2 = $(this).attr("product-id");
      }
      searchStocks();
    });

    let p1Select = false;
    let p2Select = false;
    function validateProduct1(state){
      if($('.proVariants .swatches .swatch-selector').hasClass('swatch-selected')){
        state = true;
        return state
      }else{
        state = false;
        return state
      }
    }
    function validateProduct2(state){
      if($('.proVariants-2 .swatches .swatch-selector').hasClass('swatch-selected')){
        state = true;
        return state
      }else{
        state = false;
        return state
      }
    }
    function ajaxAddToCart(){
      $('#AddToCart').attr('disable', true);
      $('#AddToCart').removeClass('is-added').addClass('is-adding');
      $('.qtyError').remove();

      var viewData = { 
        items : []
      };
      var slides = $('.swatches .swatch-selector.swatch-selected');
      let property = $('.swatches .swatch-selector.swatch-selected').attr("data-association");
      for (var i = 0; i < slides.length; i++) {
        var jsonData = {};
        jsonData['quantity'] = 1;
        jsonData['id'] = slides[i].getAttribute('product-id');
        jsonData['properties'] = {
          'Related product': property,
          'promotion': 'eby_sets'
        }
        viewData.items.push(jsonData);
      }
      var obj=$(this);
      console.log(viewData.items);
      $.ajax({
        type: 'POST',
        url: '/cart/add.js',
        data: {
          items : viewData['items']
        },
        dataType: 'json', 
        beforeSend: function() {
          $('body').addClass('velaCartAdding');
        },
        success: function (data) {
          $('body').removeClass('velaCartAdding');
          ajaxCart.load();
        },
        error: function(XMLHttpRequest, textStatus) {
          $('body').removeClass('velaCartAdding');
          var data = eval('(' + XMLHttpRequest.responseText + ')');
          $('#AddToCart').removeClass('is-adding is-added');
          if (!!data.message) {
            if (data.status == 422) {
              $(form).after('<div class="alert alert-danger qtyError">'+ data.description +'</div>')
            }
          }
        }
      });

      if ($('form[action^="/cart/add"]').hasClass('form-ajaxtocart')) {
        $("#velaQuickView").fadeOut(500);
        $(".jsQuickview").html("");
        $(".jsQuickview").fadeOut(500);
      }
      $('#AddToCart').attr('disable', false);
    }
    function validateOptionsActive(){
      $('.proVariants .swatches .qtyError').remove();
      $('.proVariants-2 .swatches .qtyError').remove();

      p1Select = validateProduct1(p1Select);
      p2Select = validateProduct2(p2Select);

      //console.log('p1Select: '+ p1Select + ', and p2Select: '+ p2Select);

      if ( p1Select == true & p2Select == true ) {
        ajaxAddToCart();
      } else {
        event.preventDefault();
        if (p1Select == false) {
          $('.proVariants .swatches').append( "<div class='alert alert-danger qtyError'>Please select your " + $('.proVariants .header small').text().replace(': ', '') + " before adding to cart</p>" );
        }
        if (p2Select == false) {
          $('.proVariants-2 .swatches').append( "<div class='alert alert-danger qtyError'>Please select your " + $('.proVariants-2 .header small').text().replace(': ', '') + " before adding to cart</p>" );
        }
      }
    }

    $('.btnAddToCart').on('click', function(event){
      //console.log('button-click');
      event.preventDefault();
      validateOptionsActive();
    });

</script>
{%- endif -%}

<script type="text/javascript" defer src="https://a.klaviyo.com/media/js/onsite/onsite.js"></script>
<script type="lazyload2" defer>

    setTimeout(function(){
        
        if (document.querySelectorAll('.collapsible').length > 0) {
            var elems = document.querySelectorAll('.collapsible');
            M.Collapsible.init(elems);
        }
        gtag("event", "view_item", {
          currency: "USD",
          value: "{{ product.price | money_without_currency }}",
          page_location: window.location.pathname, 
          page_title: document.title,
          event_category: "{{ product.title }}",
          items: [{
            item_id: "{{ product.id }}",
            item_name: "{{ product.title }}",
            affiliation: "{{ product.vendor }}",
            currency: "USD",
            index: 0,
            item_category: "{{ product.type }}",
            price: "{{ product.price | money_without_currency }}",
            quantity: 1
          }]
        });

        ttq.instance('CBK4Q5RC77U0CJTABNJG').track('ViewContent', {
            content_id: "{{ product.id }}",
            content_type: "product",
            content_category: "{{ product.type }}",
            content_name: "{{ product.title }}",
            quantity: 1,
            price: "{{ product.price | money_without_currency }}",
            value: "{{ cart.total_price | money_without_currency }}",
            currency: 'USD'
        });
      
        {% for tag in product.tags %}
        {% if tag contains 'limited_edition' %}
        var text = "We'll let you know when the next limited edition colors come out.";
        {% elsif tag contains 'core' %}
        var text = "We'll let you know when its back.";
        {% else %}
        var text = "We'll let you know when the next limited edition colors come out.";
        {% endif %}
        {% endfor %}
        var klaviyo = window.klaviyo || [];
        klaviyo.init({
          account: "L32yAn",
          platform: "shopify",
          display_on_policy_continue: true
        });
        /*
        klaviyo.enable("backinstock",{
          trigger: {
            product_page_text: "Notify Me When Available",
            product_page_class: "btn",
            product_page_text_align: "center",
            product_page_margin: "0px",
            replace_anchor: false,
            variant: 41167497887788
          },
          modal: {
            headline: "{{ prodNameTitle | replace: "_", " " | capitalize  }}" + " In " + "{{ prodColorTitle | replace: "_", " " | capitalize  }}",
            body_content: text,
            email_field_label: "Email",
            button_label: "Notify me when available",
            subscription_success_label: "You're in! We'll let you know when it's back.",
            footer_content: "",
            drop_background_color: "#000",
            background_color: "#fff",
            text_color: "#222",
            button_text_color: "#fff",
            button_background_color: "#000c48",
            close_button_color: "#ccc",
            error_background_color: "#fcd6d7",
            error_text_color: "#C72E2F",
            success_background_color: "#000c48",
            success_text_color: "#1B9500"
          }
        });
        */
      
        /* init for international shopping */
        window.addEventListener('bfx-isInternational-cookieSet', (eventParams) => {
          console.log('::bfx-isInternational event handler:'+JSON.stringify(eventParams.detail) );
          var isInternational = eventParams.detail.isInternational;
          if (isInternational === true) {
            console.log('::International/isCanada:: online');
            document.getElementsByTagName('body')[0].className += " isInternational scrollable";
            if (!!document.getElementById('addCustomBoxToCart')) {
              document.getElementById('addCustomBoxToCart').className += " bfx-checkout international";
            }
            $('.eby-header').addClass('noTopBanner');
            $('.mainContent').addClass('noTopBanner');
          } else {
            console.log('::International/isCanada:: offline');
          }
        });

        jQuery('body').on('click', '#AddBoxToCart', sentToAddEbyMembershipBox);

        function sentToAddEbyMembershipBox(event) {
          console.log(':: new click event ::');
          event.preventDefault();
          let variantSelector = document.querySelector('[name="id"]');
          //let singleOptionSelector = document.querySelector('#productSelect-option-0');
          //let shippingIntervalFrequency = document.querySelector('#shipping_interval_frequency_subs');
          //console.log('variantSelector',variantSelector.value,'singleOptionSelector',singleOptionSelector.value);
          //if (variantSelector != null && shippingIntervalFrequency != null) {
          let sizeGroup = jQuery('.swatch.size input:checked').val();
          let planGroup = "quarterly";
          /*if (singleOptionSelector != null) {
            planGroup = singleOptionSelector.value;
          }*/
          let prodsOfInterest = variantSelector.value;
          let colorOfInterest = jQuery('.swatch-color-print.selected').attr('data-value').replace('_', ' ');
          let styleOfInterest = jQuery('#prod-style-key').val();
          let productCardData = styleOfInterest;
  
          vela.addEbyMembershipBox('pdp', {
            styleGroup : null,
            colorGroup : null,
            sizeGroup  : sizeGroup,
            planGroup  : planGroup,
            prodsOfInterest : [prodsOfInterest],
            firstPantySelected : prodsOfInterest + "::" + {{ product.id }} + "::" + sizeGroup + "::" + productCardData
          });
          //}
        }

        var v = [];
        var selectCallback = function(variant, selector) {

          v = variant;  
          vela.productPage({
            money_format: '{{ shop.money_format }}',
            variant: variant,
            selector: selector
          });
        };
      
        var prodIdForInventoryCheck = "{{ product.id }}";
        var productTempObj = {{ product | json }};

        if (jQuery('.klaviyo-bis-trigger').length > 0) {
          let backInStockCta = jQuery('.klaviyo-bis-trigger');
  
          var elems = document.querySelectorAll('.bis_modal');
          var instances = M.Modal.init(elems);
    
          jQuery('body').on('submit', '#e_bis_form', function (ev) {
              ev.preventDefault();
              console.log(': custom back in stock init fire :');

              let emailSubmitted = jQuery(ev.target).find('.e_email_input').val();
              let phoneSubmitted = jQuery(ev.target).find('.e_phone_input').val();
              let consentSubmitted = jQuery(ev.target).find('.e_checkbox_input');
              let formWrapper = jQuery('.bis_modal');
              let popupWrapper = M.Modal.getInstance(document.querySelector('.bis_modal'));
              // if bralette only
              // toDo: make adjustments for any product
              let bisVariantIdSelected = jQuery('.swatchItem[value="'+jQuery('.e_size_opt_val_label')[0].innerText.split(' - ')[0].toLowerCase()+'"]').siblings()[0].getAttribute('data-id');
        
              if (emailSubmitted !== '' && !!consentSubmitted[0].checked) {
                  var settings = {
                  "async": true,
                  "url": "https://a.klaviyo.com/onsite/components/back-in-stock/subscribe",
                  "method": "POST",
                  "data": {
                    "a": "L32yAn",
                    "email": emailSubmitted,
                    "variant" : bisVariantIdSelected,
                    "platform" : "shopify",
                  }
                  };
                  $.ajax(settings).done(function(response) {
                    console.log(":submit done:", response);
                    formWrapper.find('.e_email_input').val('');
                    formWrapper.find('.e_phone_input').val('');
                    consentSubmitted[0].checked = false;
                    popupWrapper.close();
          
                    M.toast({html: 'Success! Look Out For An Email To Confirm.', classes: 'ebyAtcAlert success', displayLength: 3000});
        
                    gtag("event", "pdp-back_in_stock_form", {
                      	event_label: "get_stock_notifications-" + bisVariantIdSelected,
                        event_category: "back_in_stock_waitlist"
                    });
                  });
              } else {
                // error, please give email
                popupWrapper.close();
                M.toast({html: 'Please Provide An Email And Accept Terms.', classes: 'ebyAtcAlert error', displayLength: 1250});
              }
          });
        }
        
        {% unless settings.free_gift_enabled == true and product.id == all_products[settings.free_gift_product].id -%}
        // fc 041123
        const bundleId23 = $("#eby-bundle-bras23").attr('data-bundlepdp');
        if(typeof bundleId23 !== 'string'){

          jQuery.ajax({
            url: "https://api.shopify-inventory.jtcinteractive.com/shop/eby-by-sofia-vergara.myshopify.com/multi_variant_locations/"+ productTempObj.variants.reduce((acc,variant)=> {return acc  += "," + variant.id}, "").slice(1),
            beforeSend: function(){
  
            },
            success: function(data){
                window.productInfo = data;
                window.productObj = productTempObj;
  
                Object.keys(data).map(function (b, c) {
                    console.log("::prodVarId pdp size swatch output::", b);
                    let a = data[b];
  
                    if (a.locations[0].stock <= 5) {
                      console.log("::varData quickview OOS flag for - " + b + " \u2022 " + productTempObj.variants[c].title + "::");
                      jQuery(".swatch-element." + productTempObj.variants[c].title).addClass("soldout").removeClass('available');
                      jQuery(".swatch-element." + productTempObj.variants[c].title + " input").attr("disabled", true);
                    } else {
                      console.log("::varData quickview IN STOCK flag for - " + b + " \u2022 " + productTempObj.variants[c].title + "::");
                      jQuery(".swatch-element." + productTempObj.variants[c].title).addClass("available").removeClass('soldout');
                      jQuery(".swatch-element." + productTempObj.variants[c].title + " input").attr("disabled", false);
                      //jQuery(".productQuickAdd #product-actions-" + b + " .swatch-element." + productTempObj.variants[c].title).addClass("available").removeClass('soldout');
                    }
                });
    
                console.log(":: prod inv pull ::", window.productInfo);
              
                //var s = data[prodIdForInventoryCheck].product.variants[v.id].inventoryItem.locations;
                //console.log('--lc--', s[0].available);
                /* if(s[0].available == 0 || s[0].available < 2){
                  if($('#AddToCartText').attr('data-need-color') == undefined || $('#AddToCartText').attr('data-need-color') != 'true') {
                    // look at a different size
                    var nextInLineVarObj = data[prodIdForInventoryCheck].product.variants;
                    var variantToPreselect = null
                    for (let i = 0; i < Object.keys(nextInLineVarObj).length; i++) {
                      if (nextInLineVarObj[Object.keys(nextInLineVarObj)[i]].inventoryItem.locations[0].available > 1) {
                        variantToPreselect = nextInLineVarObj[Object.keys(nextInLineVarObj)[i]];
                          break;
                      }
                    }
                    jQuery('.swatch-element[data-value="'+variantToPreselect.title+'"] input').trigger('click');
                  } else {
                    $addToCartText.attr('data-text','Sold Out');
                  }
                }
                */
            }
          });
        }
        
        
        new Shopify.OptionSelectors('productSelect', {
            product: {{ product | json }},
            onVariantSelected: selectCallback,
            enableHistoryState: true
        });
        {%- endunless %}
  
        {% if product.available and product.options.size > 1 %}
            if (!window.swatch_show_unvailable) {
                Shopify.linkOptionSelectors({{ product | json }});
            } else if (window.swatch_enable) {
              Shopify.linkOptionSelectors({{ product | json }});
            }
        {% endif %}
        {% if product.options.size == 1 and product.options.first != 'Title' %}
            $('.selector-wrapper:eq(0)').prepend('<label for="productSelect-option-0">{{ product.options.first | escape }}</label>');
        {% endif %}
        {% if product.variants.size == 1 and product.variants.first.title contains 'Default' %}
            $('.selector-wrapper').hide();
            $('.swatch').hide();
        {% endif %}
        $('.velaProductNavTabs li:first, .proDetailInfo .tab-content .tab-pane:first').addClass('active');
        $('.proDetailInfo .velaPanel:first .panel-collapse').addClass('in');
      
        /**/
        {%- if isBundle == false %}
          jQuery(document).on('click', '.siz_guid.size_guid_pdp', function(){
            console.log(': pdp size guide event :');
            if(jQuery('.pop_size.size_guid_pdp').is(':visible'))
            {
              jQuery('.pop_size.size_guid_pdp').fadeOut()
            }
            else{
              $('.pop_size.size_guid_pdp .ebyPantyGuide, .pop_size.size_guid_pdp .ebyBraletteGuide, .pop_size.size_guid_pdp .ebyTankGuide, .pop_size.size_guid_pdp .ebyBraGuide, .pop_size.size_guid_pdp .silkGuide').hide();
              if ($('#pageContent').hasClass('ebyPantyPdp')) {
                $('.pop_size.size_guid_pdp .ebyPantyGuide').show();
              } else if ($('#pageContent').hasClass('ebyBralettePdp')) {
                $('.pop_size.size_guid_pdp .ebyBraletteGuide').show();
              } else if ($('#pageContent').hasClass('ebyBraPdp')) {
                $('.pop_size.size_guid_pdp .ebyBraGuide').show();
              } else if ($('#pageContent').hasClass('ebyTankPdp')) {
                $('.pop_size.size_guid_pdp .ebyTankGuide').show();
              } else if ($('#pageContent').hasClass('ebyBundlePdp')) {
                $('.pop_size.size_guid_pdp .ebyBraletteGuide').show();
              } else if ($('#pageContent').hasClass('ebySeasonSetPdp')) {
                $('.pop_size.size_guid_pdp .ebyBraletteGuide').show();
                $('.pop_size.size_guid_pdp .ebyPantyGuide').show();
              } else if ($('#pageContent').hasClass('ebyBodysuitPdp')) {
                $('.pop_size.size_guid_pdp .ebyBraletteGuide').show();
              } else {
                $('.pop_size.size_guid_pdp .ebyPantyGuide').show();
              }
              // ebySilkscarfPdp, ebySilkdressPdp, ebySilkblousePdp, ebySilktankPdp, ebySilkshortsPdp, ebySilkpantsPdp
              jQuery('.pop_size.size_guid_pdp').fadeIn()
            }
            return false;
          });
        {% else -%}
          jQuery(document).on('click', '.siz_guid.size_guid_pdp', function(){
            console.log(': pdp size guide event :');
            if(jQuery('.pop_size.size_guid_pdp').is(':visible')) {
              jQuery('.pop_size.size_guid_pdp').fadeOut()
            } else {
              if ($('#pageContent').hasClass('ebyPantyPdp')) {
                $('.pop_size.size_guid_pdp .ebyBraletteGuide').hide();
                $('.pop_size.size_guid_pdp .ebyPantyGuide').show();
              } else if ($('#pageContent').hasClass('ebyBralettePdp')) {
                $('.pop_size.size_guid_pdp .ebyPantyGuide').hide();
                $('.pop_size.size_guid_pdp .ebyBraletteGuide').show();
              }
              jQuery('.pop_size.size_guid_pdp').fadeIn();
            }
            return false;
          });
        {%- endif %}
        jQuery('.pop_wrapper_backing').click(function(){
          jQuery('.pop_size.size_guid_pdp').fadeOut();
        });
        jQuery('span.colz_pop').click(function(){
          jQuery('.pop_size.size_guid_pdp').fadeOut();
        });
      
        const displayProductDetails = (desktopWidth, isDesktop) => {
            if(desktopWidth > 991 && isDesktop !== true){
                //$('.product-details').css("display", "none");
                //$('.details-content').css("display", "block");
                //$('.product-details').prop("onclick", null).off("click");
                //$('.details-content').prop("onclick", null).off("click");

                return true
            } else if (desktopWidth <= 991 && isDesktop !== false){
                //$('.product-details').css("display", "block");
                //$('.details-content').css("display", "none");

                /*$('.product-details').click(function () {
                    $('.details-content').css("display", "block");
                    $('.product-details').css("display", "none");
                });
                */
                return false
            }
            return isDesktop
        };

        let desktopWidth = $(window).width();
        let isDesktop = null;
        isDesktop = displayProductDetails(desktopWidth, isDesktop);

        $(window).resize(function () {
            desktopWidth = $(window).width();
            isDesktop = displayProductDetails(desktopWidth, isDesktop);
        });      
      
        jQuery('.product-name').click(function () {
            if ($('.style-changer-mobile').css("display") === "block"){
                $('.style-changer-mobile').css("display", "none");
                $('.changer-arrow-mobile').css("transform", "rotate(0deg)");
            } else {
                $('.style-changer-mobile').css("display", "block");
                $('.changer-arrow-mobile').css("transform", "rotate(180deg)");
            }
        });

        jQuery(document).on('click', '.siz_guid.rebuy', function(e) {
          e.preventDefault();
          if (jQuery(this).data('product-type') == 'Core Bralette' || jQuery(this).data('product-type') == 'Core Bra') {
            jQuery(".ebyPantyGuide").hide();
            jQuery(".ebyBraletteGuide").show();
          } else {
            jQuery(".ebyBraletteGuide").hide();
            jQuery(".ebyPantyGuide").show();
          }
          console.log(jQuery('.pop_size.rebuy').is(':visible'));
          if(jQuery('.pop_size.rebuy').is(':visible')) {
            //console.log("HIDE");
            jQuery('.pop_size.rebuy').fadeOut();
          } else {
            jQuery('.pop_size.rebuy').fadeIn();
          }
        });
        jQuery('.pop_wrapper_backing.rebuy').click(function() {
          jQuery('.pop_size.rebuy').fadeOut();
        });
        jQuery('span.colz_pop.rebuy').click(function() {
          jQuery('.pop_size.rebuy').fadeOut();
        });
    }, 0);

    document.addEventListener('rebuy.ready', function(event) {
        jQuery('.single-select').on("click", function (ev) {
            const variantID = jQuery(this).data("value");
            const currentSelect = jQuery(this).siblings('select.rebuy-select');
            const productID = jQuery(currentSelect[0]).data("id");
            let productTileId = jQuery(this).closest('.rebuy-product-block').attr('data-prdId');
            jQuery('select.rebuy-select option[value=' + variantID + ']').attr('selected','selected');
            const rebuyWidgets = Rebuy.widgets;
            if (rebuyWidgets && rebuyWidgets.length > 0) {
                  const rebuyWidget = Rebuy.widgets[0];
                let widgetProducts = rebuyWidget.data.products;
                for( var index = 0; index < widgetProducts.length; index++ ){
                  if (widgetProducts[index].id === +productTileId) {
                      // reduce down to find the variant in question by 
                      let selectedVariantProd = widgetProducts[index].variants.reduce(function (acc, variantPrd) {
                        if (variantPrd.id === variantID) {
                          acc.push(variantPrd);
                        }
                        return acc;
                      }, []);
                      // set new values for prod upsell
                      rebuyWidget.data.products[index].selected_variant_id = variantID;
                      rebuyWidget.data.products[index].selected_variant = selectedVariantProd[0];
                  }
                }
            } else {
              console.log(':: Error - Rebuy widget not found ::');
            }
            currentSelect.val(variantID).change();
        });
        jQuery('div.rebuy-title-container').on("click", function (e) {
            e.preventDefault();
            console.log($('.rebuy-select-options'));
            $('.rebuy-select-options').hide();
            $(this).siblings('.rebuy-select-options').show();
        });
        $(document).bind( "mouseup", function(e){
                var element = $(".rebuy-select-options");
                if (!element.is(e.target) && element.has(e.target).length === 0){
                element.hide();
            }
        });
        jQuery('div.rebuy-select-options').on("click", function (e) {
            e.preventDefault();
            $('.rebuy-select-options').hide();
        }); 
    });
  
</script>


<script type="text/javascript">

/*__________________________________________________________
**********************************************************
*********** Rebuy Widget Type Factory  09142022 **********
**********************************************************
*/
class EbyTypesPdp{
  constructor(){
      this.pdpTypes = [
          'Highwaisted', 
          'Bralette', 
          'Wrap Top', 
          'Bodysuit', 
          'Tank', 
          'Highwaisted Thong', 
          'Silk', 
          'Pack',
          'Mesh'
      ]       
  }
  index(i){
      return this.pdpTypes[i]
  }
}
/*__________________________________________________________
**********************************************************
*********** Rebuy Widget Title Factory  09142022 *********
**********************************************************
*/
class EBYTitle {
  /*________________________________________________________
  ********************************************************
  * {helper fx} Get the Title 
  * @params {str}  [______Rebuy tag strip_____]
  * @params {i} index of pdp Title
  ********************************************************
  */
  pack(str){
      if (str.includes('Panties')) {
          return 'Pack Panties' 
      } else if (str.includes('Thong')) {
          return 'Pack Thongs'
      } else {
          return str
      }
  }
  underwear(str){
      const name = str.split(' ').slice(-1)
      return name[0]
  }
  title(str, i){
      const t = new EbyTypesPdp()
      const name_i = str.indexOf(t.index(i))
      const name = str.slice(name_i)
      return name
  }
  silk(str, i){
      const name = this.title(str, i)
      const silkTitle = name.replace('Silk', '')
      if(silkTitle.includes('Tank Top')) {
        return 'Tank'  
      }
      return silkTitle
  }
}

/*________________________________________________________
********************************************************
* {helper fx} Replace type for '' and _ for ' '
* @params {str}  [______Rebuy tag strip_____]
* @params {type} string to replace with
* @return {string} 
********************************************************
*/
function replaceFx(str, type) {
  const index = str.indexOf(type)
  const getStr = str.slice(index).split(',')[0]
  const refiningA = getStr.replace(type, '')
  const refiningB = refiningA.replace("_", ' ')

  return refiningB
}
/*__________________________________________________________
**********************************************************
*********** Rebuy Widget Color Factory  09142022 *********
**********************************************************
*/
class EBYColor {
  constructor(){
      this._pdpC_ = ''
  }
  /*________________________________________________________
  ********************************************************
  * {helper fx} Get the Color 
  * @params {str}  [______Rebuy tag strip_____]
  * @params {i} index of pdp Color
  ********************************************************
  */
  underwear(str) {
      const getStr = str
      if(getStr.includes('Mesh')){
          return this.color(str,8)
      } else if(getStr.includes('Cotton')){
          return getStr.replace('Cotton', '')
      }else  {
          const color = str.split(' ')
          color.pop()
          return  color.join(' ')
      }
  }
  color(str, i) {
      const regex = /Color-/i
      const found = str.match(regex)

      const getnewColor = str.slice(found.index).split(',')[0]
      const splitCharacters = getnewColor.split(/-|_/i)
      // get rid of Color- 
      splitCharacters.shift();
      const cleanColor = splitCharacters.join(' ')
      return cleanColor

  }
}
/*__________________________________________________________
**********************************************************
*********** Rebuy Widget Fabric Factory  09142022 ********
**********************************************************
*/
class EBYFabric {
  /*________________________________________________________
  ********************************************************
  * {helper fx} Bralette Fabric
  * @params {str}  [______Rebuy tag strip_____]
  * @params {a, b, c} Type underwear Fabrics
  ********************************************************
  */
  fabric(str, a, b, c){

      let newFabric = ''
      if (str.includes(a)) {
          newFabric = 'Seamless'
      } else if (str.includes(b)) {
          newFabric = 'Seamless Cotton'
      } else if (str.includes(c)) {
          newFabric = 'Seamless Sheer'
      } else {
          //braletteFabric-
          newFabric = 'Seamless'
      }
      return newFabric
  }
  bodysuit(str,a){

      let newFabric = ''

      if (str.includes(a)) {
          newFabric = 'Seamless'
      } else {
          newFabric = replaceFx(str, 'bodysuitFabric-')
      }  

      return newFabric
  }
  wrapTop(str,a){

      let newFabric = ''

      if (str.includes(a)) {
          newFabric = 'Seamless'
      } else {
          newFabric = replaceFx(str, 'wrapFabric-')
      }
      return newFabric;
  }
  pack(str){

      let newFabric = ''

      if (str.includes('Panties')) {
          const packColor = str.replace('Pack', '')
          newFabric = packColor.replace('3', '')
          return newFabric

      } else if (str.includes('Thong')) {
          newFabric = str.replace('Pack', '')
          return newFabric

      } else {
          newFabric = str.replace('Pack', '')
          return newFabric;
      }
  }
  tank(str, a){

      let newFabric = ''
  
      if (str.includes(a)) {
          newFabric = 'Seamless'
      } else {
          newFabric = replaceFx(str, 'tankFabric-')
      }
      return newFabric;
  }
}
/*__________________________________________________________
**********************************************************
*********** Rebuy Widget Update 2022 FC 09032022 *********
**********************************************************
*/
class EBYProduct {
  constructor() {
      this._pdpT_ = ''
      this._pdpC_ = ''
      this._pdpF_ = ''
  }
  /*________________________________________________________
  ********************************************************
  * Get the title
  * @params {str}  [______Rebuy tag strip_____]
  ********************************************************
  */
  getTitleType(str) {
      this.conditionalProducts(
          str,
          'underwear',
          'Bralette',
          'Wrap Top',
          'Bodysuit',
          'Tank',
          'highwaisted_thong',
          'Silk',
          'Pack',
          'TITLE'
      )
  }
  /*________________________________________________________
  ********************************************************
  * Get the color
  * @params {str}  [______Rebuy tag strip_____] 
  ********************************************************
  */
  getColorType(str) {
      this.conditionalProducts(
          str,
          'underwear',
          'bralette',
          'Wrap Top',
          'Bodysuit',
          'Tank',
          'highwaisted_thong',
          'silk',
          'packColor',
          'COLOR'
      )
  }
  /*________________________________________________________
  ********************************************************
  * Get the Fabric
  * @params {str}  [______Rebuy tag strip_____]
  ********************************************************
  */
  getFabricType(str) {
      this.conditionalProducts(
          str,
          'underwear',
          'braletteFabric-',
          'wrapFabric-',
          'bodysuitFabric-',
          'tankFabric-',
          'highwaisted_thong',
          'silk',
          'tierOne-',
          'FABRIC'
      )
  }
  /*________________________________________________________
  ********************************************************
  ************** Write to HTMLElement ******************** 
  ********************************************************
  */
  writeTitleElement(i) {

      document.querySelectorAll(`.r---product-title---22`)[i]
          .textContent = this._pdpT_
      document.querySelectorAll(`.r---product-fabric---22`)[i]
          .textContent = this._pdpF_
      document.querySelectorAll(`.r---product-color---22`)[i]
          .textContent = this._pdpC_

      this.reset();
  }
  /*________________________________________________________
  ********************************************************
  * Reset __pdp Title__, __pdp Color__, __pdp Fabric__ *** 
  ********************************************************
  */
  reset() {
      this._pdpT_ = ''
      this._pdpC_ = ''
      this._pdpF_ = ''
  }
  /*________________________________________________________
  ********************************************************
  * Conditional logic of products
  * @params {str} [______Rebuy tag strip_____]
  * @params {pdpA, ... , pdpE} type Title, Color, Fabirc
  * @params {handler} options TITLE, COLOR, FABRIC
  ********************************************************
  */
  conditionalProducts(str, pdpA, pdpB, pdpC, pdpD, pdpE, pdpF, pdpG, pdpH, handler) {

      //console.log('______________________________________________________________________')
      //console.log(str, handler)
      //console.log('______________________________________________________________________')
      const str_clean = str.toLowerCase()
      const underwearLogic = str_clean.includes('highwaisted') || str_clean.includes('brief') || str_clean.includes('bikini') || str_clean.includes('thong') || str_clean.includes('cheeky')
      if (underwearLogic && !str_clean.includes('packs') ) {
          // underware
          
          switch (handler) {
              case 'TITLE':
                  const newTitle = new EBYTitle()
                  this._pdpT_ = newTitle.underwear(str)
                  return;
              case 'COLOR':
                  const newColor = new EBYColor()
                  this._pdpC_ = newColor.color(str)
                  return;
              case 'FABRIC':
                  const newFabric = new EBYFabric()
                  this._pdpF_ = newFabric.fabric(str, 'seamless', 'cotton', 'mesh')
                  return;
              default:
                  console.error(`**** [${handler}] not found in EBYProduct ***`)
          }
      } else if (str.includes(pdpB)) {
          // bralettes
          switch (handler) {
              case 'TITLE':
                  const newTitle = new EBYTitle()
                  this._pdpT_ = newTitle.title(str,1)
                  return;
              case 'COLOR':
                  const newColor = new EBYColor()
                  this._pdpC_ = newColor.color(str)
              case 'FABRIC':
                  const newFabric = new EBYFabric()
                  this._pdpF_ = newFabric.fabric(str, 'signature', 'cotton', 'mesh')
                  return;
              default:
                  console.error(`**** [${handler}] not found in EBYProduct ***`)
          }
      } else if (str.includes(pdpC)) {
          // Wrap top
          switch (handler) {
              case 'TITLE':
                  const newTitle = new EBYTitle()
                  this._pdpT_ = newTitle.title(str,2)
                  return;
              case 'COLOR':
                  const newColor = new EBYColor()
                  this._pdpC_ = newColor.color(str)
              case 'FABRIC':
                  const newFabric = new EBYFabric()
                  this._pdpF_ = newFabric.wrapTop(str, 'signature')
                  return;
              default:
                  console.error(`**** [${handler}] not found in EBYProduct ***`)
          }
      } else if (str.includes(pdpD)) {
          // Bodysuit
          switch (handler) {
              case 'TITLE':
                  const newTitle = new EBYTitle()
                  this._pdpT_ = newTitle.title(str,3)
                  return;
              case 'COLOR':
                  const newColor = new EBYColor()
                  this._pdpC_ = newColor.color(str, 3)
              case 'FABRIC':
                  const newFabric = new EBYFabric()
                  this._pdpF_ = newFabric.bodysuit(str, 'signature')
                  return;
              default:
                  console.error(`**** [${handler}] not found in EBYProduct ***`)
          }
      } else if (str.includes(pdpG)) {
          // Silk
          switch (handler) {
              case 'TITLE':
                  const newTitle = new EBYTitle()
                  this._pdpT_ = newTitle.silk(str,6)
                  return;
              case 'COLOR':
                  const newColor = new EBYColor()
                  this._pdpC_ = newColor.color(str, 6)
                  return;
              case 'FABRIC':
                  this._pdpF_ = 'Washable Eco Silk'
                  return;
              default:
                  console.error(`**** [${handler}] not found in EBYProduct ***`)
          }
      } else if (str.includes(pdpF)) {
          // high waisted
          switch (handler) {
              case 'TITLE':
                  const newTitle = new EBYTitle()
                  this._pdpT_ = newTitle.title(str,5)
                  return;
              case 'COLOR':
                  this._pdpF_ = 'High Waisted Thong'
                  return;
              default:
                  console.error(`**** [${handler}] not found in EBYProduct ***`)
          }
      } else if (str.includes(pdpE)) {
          // Tank  
          switch (handler) {
              case 'TITLE':
                  const newTitle = new EBYTitle()
                  this._pdpT_ = newTitle.title(str,4)
                  return;
              case 'COLOR':
                  const newColor = new EBYColor()
                  this._pdpC_ = newColor.color(str, 4)
              case 'FABRIC':
                  const newFabric = new EBYFabric()
                  this._pdpF_ = newFabric.tank(str, 'signature')
                  return;
              default:
                  console.error(`**** [${handler}] not found in EBYProduct ***`)
          }       
      } else if (str.includes(pdpH)) {
          // Pack
          switch (handler) {
              case 'TITLE':
                  const newTitle = new EBYTitle()
                  this._pdpT_ = newTitle.pack(str)
                  return;
              case 'COLOR':
                  const newColor = new EBYColor()
                  this._pdpC_ = newColor.color(str)
                  return;
              case 'FABRIC':
                  const newFabric = new EBYFabric()
                  this._pdpF_ = newFabric.fabric(str, 'signature', 'cotton', 'mesh')
                  return;
              default:
                  console.error(`**** [${handler}] not found in EBYProduct ***`)
          }
      }
  }
}

document.addEventListener("rebuy.ready", function (event) {

  const ebyPdp = new EBYProduct();
  const newWidget = event.detail.widget
  const rebuyWidgets = newWidget;
  const rebuyId = newWidget.id
  const rebuyWidgetIds = ["75385", "74714", "75387", "75389"];

  let widgetProducts = rebuyWidgets.data.products;
  const avbsc = rebuyWidgetIds.indexOf(rebuyId);
  
  if (rebuyWidgetIds.indexOf(rebuyId) >= 0) {
    for (var index = 0; index < widgetProducts.length; index++) {
  
        const rebuyTitleFilter = ebyPdp.getTitleType(widgetProducts[index].title)
        const rebuyColorFilter = ebyPdp.getColorType(widgetProducts[index].tags)
        const rebuyFabricFilter = ebyPdp.getFabricType(widgetProducts[index].tags)
  
        ebyPdp.writeTitleElement(index);
    }
  }
  
});

</script>